<!doctype html>
<html lang="ar" dir="rtl">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ููุตุฉ ุฅุฎุชุจุงุฑุงุช ุจูุฑูุฒ ุงูุฏูููุฉ</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&amp;display=swap" rel="stylesheet">
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100%;
            color: #333;
        }

        * {
            box-sizing: border-box;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100%;
        }

        .page {
            display: none;
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            animation: fadeIn 0.3s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #4CAF50;
        }

        .header h1 {
            color: #1e3c72;
            font-size: 2.5em;
            margin: 0 0 10px 0;
            font-weight: 700;
        }

        .header p {
            color: #666;
            font-size: 25px;
            margin: 0;
        }

        .subject-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .subject-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 3px solid transparent;
        }

        .subject-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .subject-card.selected {
            border-color: #4CAF50;
            transform: scale(1.05);
        }

        .subject-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .subject-card h3 {
            margin: 10px 0 0 0;
            font-size: 1.3em;
        }

        .form-group {
            margin: 25px 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #1e3c72;
            font-size: 1.1em;
        }

        .form-group select,
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            font-family: 'Cairo', sans-serif;
            transition: border-color 0.3s ease;
        }

        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .btn {
            background: #4CAF50;
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
            display: inline-block;
            text-align: center;
        }

        .btn:hover {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #2196F3;
        }

        .btn-secondary:hover {
            background: #1976D2;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .teacher-name {
            color: #666;
            font-size: 50px;
            margin: 0;
            font-weight: 600;
        }

        .rules-list {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .rules-list li {
            margin: 12px 0;
            padding-right: 10px;
            line-height: 1.8;
            font-size: 1.05em;
        }

        .question-container {
            margin: 30px 0;
        }

        .question-header {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .question-number {
            color: #1e3c72;
            font-weight: 700;
            font-size: 1.2em;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.3em;
            color: #333;
            line-height: 1.6;
            font-weight: 600;
        }

        .options-container {
            margin: 20px 0;
        }

        .option {
            background: white;
            border: 2px solid #ddd;
            padding: 15px 20px;
            margin: 12px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
        }

        .option:hover {
            border-color: #4CAF50;
            background: #f0f8f0;
        }

        .option.selected {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }

        .drag-drop-container {
            margin: 20px 0;
        }

        .drag-items {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            min-height: 80px;
            margin-bottom: 20px;
        }

        .drag-item {
            background: white;
            border: 2px solid #4CAF50;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: move;
            font-size: 1.1em;
            transition: all 0.3s ease;
            user-select: none;
        }

        .drag-item:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .drag-item.dragging {
            opacity: 0.5;
        }

        .drop-zone {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 20px;
            background: #e8f5e9;
            border: 2px dashed #4CAF50;
            border-radius: 8px;
            min-height: 80px;
        }

        .drop-zone.drag-over {
            background: #c8e6c9;
            border-color: #2e7d32;
        }

        .dropdown-container {
            margin: 20px 0;
        }

        .dropdown-select {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1em;
            font-family: 'Cairo', sans-serif;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .dropdown-select:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .dropdown-select.answered {
            background: #e8f5e9;
            border-color: #4CAF50;
        }

        .click-drag-container {
            margin: 20px 0;
            text-align: center;
        }

        .slider-container {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
            margin: 20px 0;
            cursor: pointer;
        }

        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .slider-value {
            font-size: 1.3em;
            font-weight: 600;
            color: #1e3c72;
            margin: 15px 0;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
            color: #666;
            margin-top: 10px;
        }

        .essay-container {
            margin: 20px 0;
        }

        .essay-textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1em;
            font-family: 'Cairo', sans-serif;
            resize: vertical;
            transition: border-color 0.3s ease;
            line-height: 1.6;
        }

        .essay-textarea:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .essay-textarea.answered {
            background: #f8fff8;
            border-color: #4CAF50;
        }

        .word-count {
            text-align: left;
            margin-top: 10px;
            font-size: 0.9em;
            color: #666;
        }

        .word-count.valid {
            color: #4CAF50;
        }

        .word-count.invalid {
            color: #f44336;
        }

        .essay-instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.95em;
            color: #1565c0;
        }

        .matching-container {
            margin: 20px 0;
        }

        .matching-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }

        .matching-column {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #ddd;
        }

        .matching-column h4 {
            margin: 0 0 15px 0;
            color: #1e3c72;
            font-size: 1.1em;
            text-align: center;
        }

        .matching-item {
            background: white;
            border: 2px solid #4CAF50;
            padding: 12px 15px;
            margin: 8px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
            user-select: none;
            position: relative;
        }

        .matching-item:hover {
            transform: translateX(-3px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .matching-item.selected {
            background: #4CAF50;
            color: white;
            transform: scale(1.02);
        }

        .matching-item.matched {
            background: #e8f5e9;
            border-color: #2e7d32;
            color: #2e7d32;
            cursor: default;
        }

        .matching-item.matched::after {
            content: "โ";
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: #2e7d32;
        }

        .matching-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .matching-line {
            stroke: #4CAF50;
            stroke-width: 3;
            opacity: 0.8;
        }

        .ordering-container {
            margin: 20px 0;
        }

        .ordering-items {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px dashed #4CAF50;
            min-height: 200px;
        }

        .ordering-item {
            background: white;
            border: 2px solid #4CAF50;
            padding: 15px 20px;
            border-radius: 8px;
            cursor: move;
            font-size: 1.1em;
            transition: all 0.3s ease;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .ordering-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .ordering-item.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }

        .ordering-number {
            background: #4CAF50;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }

        .multiple-select-container {
            margin: 20px 0;
        }

        .multiple-select-option {
            background: white;
            border: 2px solid #ddd;
            padding: 15px 20px;
            margin: 10px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .multiple-select-option:hover {
            border-color: #4CAF50;
            background: #f0f8f0;
        }

        .multiple-select-option.selected {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }

        .multiple-select-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #ddd;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .multiple-select-option.selected .multiple-select-checkbox {
            background: white;
            border-color: white;
            color: #4CAF50;
        }

        .multiple-select-option:not(.selected) .multiple-select-checkbox {
            background: transparent;
        }

        .multiple-select-instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.95em;
            color: #1565c0;
            text-align: center;
        }



        .progress-bar {
            background: #e0e0e0;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4CAF50 0%, #45a049 100%);
            height: 100%;
            transition: width 0.3s ease;
        }

        .timer {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2em;
            font-weight: 600;
            color: #856404;
            margin-bottom: 20px;
        }

        .results-summary {
            text-align: center;
            margin: 30px 0;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            box-shadow: 0 10px 30px rgba(76, 175, 80, 0.3);
        }

        .score-circle .percentage {
            font-size: 3em;
            font-weight: 700;
        }

        .score-circle .label {
            font-size: 1.1em;
            margin-top: 5px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-card .number {
            font-size: 2.5em;
            font-weight: 700;
            color: #1e3c72;
        }

        .stat-card .label {
            color: #666;
            margin-top: 5px;
        }

        .answer-review {
            margin: 30px 0;
        }

        .review-item {
            background: #f8f9fa;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-right: 5px solid #ddd;
        }

        .review-item.correct {
            border-right-color: #4CAF50;
        }

        .review-item.incorrect {
            border-right-color: #f44336;
        }

        .review-question {
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .review-answer {
            margin: 8px 0;
            padding-right: 20px;
        }

        .review-answer.correct-answer {
            color: #4CAF50;
            font-weight: 600;
        }

        .review-answer.user-answer {
            color: #f44336;
        }

        .resources {
            background: #e3f2fd;
            padding: 25px;
            border-radius: 8px;
            margin: 30px 0;
        }

        .resources h3 {
            color: #1e3c72;
            margin-top: 0;
        }

        .resource-link {
            display: block;
            color: #2196F3;
            text-decoration: none;
            margin: 10px 0;
            font-size: 1.05em;
        }

        .resource-link:hover {
            text-decoration: underline;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        @media print {
            body {
                background: white;
            }
            .btn, .btn-group {
                display: none;
            }
            .page {
                box-shadow: none;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="container"><!-- ุตูุญุฉ ุฑุฆูุณูุฉ -->
   <div id="homePage" class="page active">
    <div class="header">
     <h1 id="schoolName">ูุฏุฑุณุฉ ุงูุทุงูุจ ุงูุฐูู ุงูุฎุงุตุฉ ุจูุฒูู</h1>
     <p class="teacher-name">ุฅุนุฏุงุฏ : ุฃ. ููุฒูุฉ ููุงู ูุฑุบูู</p>
     <p id="welcomeText">ูุฑุญุจุงู ุจู ูู ููุตุฉ ุงูุงุฎุชุจุงุฑุงุช ุงูุชุนููููุฉ</p>
    </div>
    <div class="form-group"><label>ุงุณู ุงูุทุงูุจ</label> <input type="text" id="studentName" placeholder="ุฃุฏุฎู ุงุณูู ุงููุงูู">
    </div>
    <div class="form-group"><label>ุงููุงุฏุฉ</label>
     <div class="subject-grid">
      <div class="subject-card selected" data-subject="ูุบุฉ ุนุฑุจูุฉ">
       <div class="subject-icon">
        ๐
       </div>
       <h3>ุงููุบุฉ ุงูุนุฑุจูุฉ</h3>
       <p style="margin: 10px 0 0 0; font-size: 0.9em; opacity: 0.9;">ุงููุญู ูุงูุตุฑู ูุงูุจูุงุบุฉ</p>
      </div>
     </div>
    </div>
    <div class="form-group"><label>ุงููุณุชูู</label> <select id="levelSelect"> <option value="">ุงุฎุชุฑ ุงููุณุชูู</option> <option value="ุณูู">ุณูู</option> <option value="ูุชูุณุท">ูุชูุณุท</option> <option value="ุตุนุจ">ุตุนุจ</option> <option value="ููู ุงูููุฑูุก">ููู ุงูููุฑูุก</option> </select>
    </div>
    <div class="form-group"><label>ูุฏุฉ ุงูุงุฎุชุจุงุฑ (ุฏูููุฉ)</label> <select id="durationSelect"> <option value="0">ุจุฏูู ุชูููุช</option> <option value="15">15 ุฏูููุฉ</option> <option value="30">30 ุฏูููุฉ</option> <option value="45">45 ุฏูููุฉ</option> <option value="60">60 ุฏูููุฉ</option> </select>
    </div>
    <div class="btn-group"><button class="btn" id="continueBtn" disabled>ูุชุงุจุนุฉ</button>
    </div>
   </div><!-- ุตูุญุฉ ุงูููุงุนุฏ -->
   <div id="rulesPage" class="page">
    <div class="header">
     <h1 id="instructionsTitle">ููุงุนุฏ ุงูุงุฎุชุจุงุฑ</h1>
    </div>
    <div class="rules-list">
     <ul>
      <li>ุงูุฑุฃ ูู ุณุคุงู ุจุนูุงูุฉ ูุจู ุงุฎุชูุงุฑ ุงูุฅุฌุงุจุฉ</li>
      <li>ููููู ุงูุชููู ุจูู ุงูุฃุณุฆูุฉ ุจุงุณุชุฎุฏุงู ุฃุฒุฑุงุฑ ุงูุณุงุจู ูุงูุชุงูู</li>
      <li>ููููู ุญูุธ ุชูุฏูู ูุงูุนูุฏุฉ ูุงุญูุงู</li>
      <li>ุชุฃูุฏ ูู ุงูุฅุฌุงุจุฉ ุนูู ุฌููุน ุงูุฃุณุฆูุฉ ูุจู ุฅููุงุก ุงูุงุฎุชุจุงุฑ</li>
      <li>ุณูุชู ุนุฑุถ ุงููุชูุฌุฉ ููุฑ ุงูุชูุงุก ุงูุงุฎุชุจุงุฑ</li>
      <li>ููููู ุทุจุงุนุฉ ุงููุชูุฌุฉ ุฃู ุชุญููููุง ูููู PDF</li>
     </ul>
    </div>
    <div id="testInfo" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
     <p><strong>ุงููุงุฏุฉ:</strong> <span id="selectedSubject"></span></p>
     <p><strong>ุงููุณุชูู:</strong> <span id="selectedLevel"></span></p>
     <p><strong>ุงููุฏุฉ:</strong> <span id="selectedDuration"></span></p>
     <p><strong>ุนุฏุฏ ุงูุฃุณุฆูุฉ:</strong> <span id="totalQuestions"></span></p>
    </div>
    <div class="btn-group"><button class="btn btn-secondary" id="backToHomeBtn">ุฑุฌูุน</button> <button class="btn" id="startTestBtn">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ</button>
    </div>
   </div><!-- ุตูุญุฉ ุงูุงุฎุชุจุงุฑ -->
   <div id="testPage" class="page">
    <div class="header">
     <h1>ุงูุงุฎุชุจุงุฑ</h1>
    </div>
    <div id="timerContainer" class="timer" style="display: none;">
     ุงูููุช ุงููุชุจูู: <span id="timeRemaining"></span>
    </div>
    <div class="progress-bar">
     <div class="progress-fill" id="progressFill" style="width: 0%"></div>
    </div>
    <p style="text-align: center; color: #666; margin-top: 10px;">ุงูุณุคุงู <span id="currentQuestion">1</span> ูู <span id="totalQuestionsTest"></span></p>
    <div class="question-container">
     <div class="question-header">
      <div class="question-number" id="questionNumber"></div>
      <div class="question-text" id="questionText"></div>
     </div>
     <div class="options-container" id="optionsContainer"></div>
     <div id="answerNote" style="background: #e8f5e9; padding: 15px; border-radius: 8px; margin-top: 20px; display: none;">
      <p style="margin: 0; color: #2e7d32; font-weight: 600;">โ ุชู ุญูุธ ุฅุฌุงุจุชู</p>
     </div>
    </div>
    <div class="btn-group"><button class="btn btn-secondary" id="prevBtn" disabled>ุงูุณุงุจู</button> <button class="btn btn-secondary" id="saveProgressBtn">ุญูุธ ูุงูุฎุฑูุฌ</button> <button class="btn" id="nextBtn">ุงูุชุงูู</button> <button class="btn" id="finishBtn" style="display: none;">ุฅููุงุก ุงูุงุฎุชุจุงุฑ</button>
    </div>
   </div><!-- ุตูุญุฉ ุงููุชุงุฆุฌ -->
   <div id="resultsPage" class="page">
    <div class="header">
     <h1 id="resultsTitle">ูุชูุฌุฉ ุงูุงุฎุชุจุงุฑ</h1>
    </div>
    <div class="results-summary">
     <div class="score-circle">
      <div class="percentage" id="scorePercentage">
       0%
      </div>
      <div class="label">
       ุงููุชูุฌุฉ
      </div>
     </div>
     <div class="stats-grid">
      <div class="stat-card">
       <div class="number" id="correctCount">
        0
       </div>
       <div class="label">
        ุฅุฌุงุจุงุช ุตุญูุญุฉ
       </div>
      </div>
      <div class="stat-card">
       <div class="number" id="incorrectCount">
        0
       </div>
       <div class="label">
        ุฅุฌุงุจุงุช ุฎุงุทุฆุฉ
       </div>
      </div>
      <div class="stat-card">
       <div class="number" id="timeSpent">
        0
       </div>
       <div class="label">
        ุงูููุช ุงููุณุชุบุฑู
       </div>
      </div>
     </div>
    </div>
    <div class="answer-review">
     <h2 style="color: #1e3c72; margin-bottom: 20px;">ูุฑุงุฌุนุฉ ุงูุฅุฌุงุจุงุช</h2>
     <div id="reviewContainer"></div>
    </div>
    <div class="resources">
     <h3>ูุตุงุฏุฑ ูููุฑุงุฌุนุฉ</h3><a href="#" class="resource-link" target="_blank" rel="noopener noreferrer">๐ ููุฎุต ุงูุฏุฑูุณ - ููู PDF</a> <a href="#" class="resource-link" target="_blank" rel="noopener noreferrer">๐ ุดุฑุญ ุชูุตููู - ุตูุญุฉ ูุงููุง</a> <a href="#" class="resource-link" target="_blank" rel="noopener noreferrer">๐ฅ ููุฏูููุงุช ุชุนููููุฉ</a> <a href="#" class="resource-link" target="_blank" rel="noopener noreferrer">๐ ุชูุงุฑูู ุฅุถุงููุฉ</a>
    </div>
    <div class="btn-group"><button class="btn btn-secondary" onclick="window.print()">ุทุจุงุนุฉ ุงููุชูุฌุฉ</button> <button class="btn" id="newTestBtn">ุงุฎุชุจุงุฑ ุฌุฏูุฏ</button>
    </div>
   </div>
  </div>
  <script>
        const defaultConfig = {
            school_name: "ูุฏุฑุณุฉ ุงูุทุงูุจ ุงูุฐูู ุงูุฎุงุตุฉ ุจูุฒูู",
            welcome_text: "ูุฑุญุจุงู ุจู ูู ููุตุฉ ุงูุงุฎุชุจุงุฑุงุช ุงูุชุนููููุฉ",
            instructions_title: "ููุงุนุฏ ุงูุงุฎุชุจุงุฑ",
            start_button_text: "ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ",
            results_title: "ูุชูุฌุฉ ุงูุงุฎุชุจุงุฑ",
            background_color: "#1e3c72",
            surface_color: "#ffffff",
            text_color: "#333333",
            primary_action_color: "#4CAF50",
            secondary_action_color: "#2196F3",
            font_family: "Cairo",
            font_size: 16
        };

        let currentConfig = { ...defaultConfig };
        let allTestData = [];

        const readingPassage = `ุฃูููุฉ ูุงูุชูุณุงุญ

ุฃูููุฉ ูู ุงูุนุงุดุฑุฉ ูู ุนูุฑูุงุ ููุงู ุจุฅููุงููุง ุฃู ุชุดู ุทุฑูููุง ูู ุบุฑูุชูุง ุฅูู ุงูุญูุงู ููู ูุตู ูุงุฆูุฉ. ููููู ุจุงุจ ุบุฑูุชูุง ูู ุงูุนุงุฏุฉ ููุงุฑุจูุง ููุณูุญ ูููุตุจุงุญ ุงููููู ูู ุงูููุฑ ุจุฃู ูุนุทู ุงูุบุฑูุฉ ุฅุถุงุกุฉ ูุงููุฉ ูุชุตู ุฅูู ุงูุญูุงู ูุฑูุฑุง ุจููุถุฏุฉ ุงููุงุชู.

ูู ุฅุญุฏู ุงูููุงูู ุจูููุง ูุงูุช ุฃูููุฉ ูุงุฑุฉ ุจููุถุฏุฉ ุงููุงุชู ูู ุทุฑูููุง ุฅูู ุงูุญูุงู ุณูุนุช ุตูุชุงู ููุฎูุถุงู ูุงููุณูุณ. ููู ูู ุงูุญูููุฉ ูู ุชูุชู ููุฐุง ุงูุตูุช ููููุง ูุตู ูุงุฆูุฉ. ูุนูู ุฃู ุญุงู ูุงู ุงูุตูุช ูุงุฏูุง ูู ุจุนูุฏ. ููู ุชุนุฑู ูู ุฃูู ูุฃุชู ูุฐุง ุงูุตูุช ุฅูุง ูู ุทุฑูู ุนูุฏุชูุง ุฅูู ุบุฑูุชูุง. ูุงูุช ูููุฉ ูู ุงูุตุญู ูุงููุฌูุงุช ุงููุฏููุฉ ุชุญุช ุงูููุถุฏุฉ ูุฏ ุจุฏุฃุช ุชุชุญุฑู. ููู ููุง ูุงู ูุตุฏุฑ ุงูุตูุช. ููุฌุฃุฉ ุจุฏุฃุช ูููุฉ ุงูุตุญู ูุงููุฌูุงุช ุชุชุณุงูุท ููููุง ูุดูุงูุง ูุงูู ุงูุฃูุงู ูุงูุฎูู. ุจุนุฏูุง ูุงูุช ุงูุตุญู ูุงููุฌูุงุช ููู ุงูุฃุฑุถ ูู ูู ููุงู ูู ุชุตุฏู ุฃูููุฉ ุนููููุง ุญูู ุดุงูุฏุช ุชูุณุงุญุงู ูุดุฎุฑ ูููุฎุฑ ุฎุงุฑุฌุงู ูู ุชุญุช ุงูููุถุฏุฉ.

ุชุฌูุฏุช ุฃูููุฉ ูู ููุงููุง ูุงุชุณุนุช ุนููุงูุง ูุตุญูู ููุฌุงู ุฑุงูุจุช ุงูุชูุณุงุญ ูุฒุญู ุฎุงุฑุฌุงู ูู ูููุฉ ุงูุตุญู ูุงููุฌูุงุช ููู ูุชููุช ูู ุฃูุญุงุก ุงูุดูุฉ ุจุจุทุกุ ูุงู ูุจุฏู ููุฃูู ุฎุงุฑุฌุง ูุชูู ูู ุงููุงุก ูุจููุง ูุชูุงุทุฑ ููู ุงููุงุก. ููุงู ูุชุฑู ุงูุณุฌุงุฏ ูุจููุงู ุฃูููุง ุฎุทู.

ุญุฑู ุงูุชูุณุงุญ ุฑุฃุณู ุฅูู ุงูุฃูุงู ูุงูุฎูู ูุตุฏุฑุงู ูุณูุณุงู ุนุงููุงูุ ุจูุนุช ุฃูููุฉ ุฑูููุง ุจุตุนูุจุฉ ููู ุชูุธุฑ ุฅูู ูุฎุงุท ุงูุชูุณุงุญ ูุตู ูุฎูู ูุทููู ูู ุงูุฃุณูุงู ูุญุฑู ุฐููู ุจุจุทุก ุฅูู ุงูุฃูุงู ูุฅูู ุงูุฎูู ุฃูููุฉ ูุงูุช ูุฏ ูุฑุฃุช ูู ูุฌูุฉ ุงูุญููุงูยป ููู ูููุถ ุงูุชูุณุงุญ ุงููุงุก ุจุฐููู ุญูู ูุทุงุฑุฏ ุฃุนุฏุงุกู ุฃู ูุฑูุฏ ุงููุฌูู ุนูููู.

ููุน ูุธุฑูุง ุนูู ุขุฎุฑ ุนุฏุฏ ูู ูุฌูุฉ ุงูุญููุงู ุงูุฐู ููุน ุนูู ูุฏููุง ูู ูููุฉ ุงูุตุญู ูุงููุฌูุงุชุ ุซู ุชููุช ุฃูููุฉ ุตุฏูุฉ ุฃุฎุฑู ุญูู ูุงุญุธุช ุฃู ุบูุงู ุงููุฌูุฉ ุงูุฐู ูุงู ูุญูู ุตูุฑุฉ ุชูุณุงุญ ูุจูุฑ ูู ููุฑ ุฃุตุจุญ ุงูุขู ูุญูู ุตูุฑุฉ ููุฑ ูุงุฑุบ.

ุงูุญูุช ุฃูููุฉ ูุงูุชูุทุช ุงููุฌูุฉ ูู ูุฐู ุงููุญุธุฉ ุญุฑู ุงูุชูุณุงุญ ุฐููู ุจููุฉ ุจุญูุซ ูุณุฑ ุงููุฒูุฑูุฉ ุนูู ุงูุฃุฑุถุ ููุซุฑ ุฃุฒูุงุฑ ุฏูุงุฑ ุงูุดูุณ ูู ูู ููุงู ูุจููุฒุฉ ุณุฑูุนุฉ ูู ุฃูููุฉ ูุงูุช ูู ุบุฑูุชูุงุ ุฃุบููุช ุงูุจุงุจ ุจุดุฏุฉ. ูุฃูุณูุช ุจุณุฑูุฑูุง ูุฏูุนุชู ูุฑุงุก ุงูุจุงุจ ูุจุฐูู ุจูุช ูููุณูุง ูุชุฑุงุณุงู ูุจูููุง ูู ุฃูุงู ูู ุงูุชูุณุงุญ ุงุฑุชุงุญุช ูุชููุณุช ุงูุตุนุฏุงุก.

ููููุง ุชุฑุฏุฏุช ูุงุฐุง ูู ูุงู ูุฐุง ุงููุญุด ุจูู ุจุณุงุทุฉ ุฌุงุฆุนุงู ุ ุฑุจูุง ุนููู ุฃู ุชุนุทู ุงูุชูุณุงุญ ุดูุฆุงู ููุฃููู ูู ูุบุงุฏุฑ.

ูุธุฑุช ุฃูููุฉ ุซุงููุงู ุฅูู ูุฌูุฉ ุงูุญููุงู ุฅุฐุง ุชููู ุงูุชูุณุงุญ ุฃู ูุฒุญู ุฎุงุฑุฌ ุงูุตูุฑุฉ. ุฑุจูุง ูููู ุงูุญููุงูุงุช ุฃุฎุฑู ุฃู ุชุฎุฑุฌ ูู ุงูุตูุฑุฉ ุชุตูุญุช ุฃูููุฉ ุงููุฌูุฉ ุจุณุฑุนุฉ ูุชูููุช ุนูุฏ ุณุฑุจ ูู ุทููุฑ ุงูุจุฌุน ูู ูุณุชููุน ุจุงูุฃุฏุบุงู ูููุฑุช ุฃู ูุฐุง ูู ุงูุตูุงุจ.

ุจุฏุช ุทููุฑ ุงูุจุฌุน ููุฃููุง ูุนูุฉ ุนูุฏ ูููุงุฏ ููุชูุงุณูุญ. ููุฌุฃุฉ ุจุฏุฃ ุทุฑู ุฐูู ุงูุชูุณุงุญ ูุถุฑุจ ุดููู ุงูุจุงุจ ูุตุฏุฑุง ุตูุชุงู ุนุงููุงู.

ุญููุช ุฃูููุฉ ุจุณุฑุนุฉ ุตูุฑุฉ ุทููุฑ ุงูุจุฌุน ุฅูู ุซูุจ ุงูุจุงุจ ูุตุฑุฎุช ุจุฃุนูู ุตูุชูุง ุงุฎุฑุฌู ูู ุงููุณุชููุนยป! ุจุนุฏูุง ุฑูุช ุจุงูุตูุฑุฉ ูู ุฎูุงู ุงูุซูุจ ุฅูู ุงูููุฑ ูุฃุฎุฐุช ุชุตูู ุจูุฏููุง ูุชุตุฑุฎ.

ูุจุตุนูุจุฉ ุตุฏูุช ุฃูููุฉ ูุง ุญุฏุซ ุจุนุฏ ุฐูู ููุฏ ุงูุชูุฃ ุงูููุฑ ุจุทููุฑ ุงูุจุฌุน ููู ุชุตูุญ ูุชุฑูุฑู ุจุฃุฌูุญุชูุง. ูุชุฑูุถ ุจุณููุงููุง ุงูุฏูููุฉ ูู ูู ููุงู ุฑุฃุช ุฃูููุฉ ุฃุญุฏ ุงูุทููุฑ ููุณูุง ุจูููุงุฑู ุฒูุฑุฉ ุฏูุงุฑ ุงูุดูุณุ ูุขุฎุฑ ุฎุทู ูุจุนุฉ ูุงูุฏุชูุง ูู ุฎุทุงููุง. ูุฐูู ุฑุฃุช ุทุงุฆุฑ ุจุฌุน ูุฎุชูู ูู ูู ุงูุชูุณุงุญ, ูุจูุถูุชูู ุณุฑูุนุชูู ุงุจุชูุนู. ูุจุณุฑุนุฉ ุชุจุนู ุงูุขุฎุฑ ุงูุฐู ูุงู ููุณูุงู ุจุฒูุฑุฉ ุฏูุงุฑ ุงูุดูุณ.

ุจุนุฏ ูุฌุจุชูู ูู ุทููุฑ ุงูุจุฌุน ุงูุชูู ุงูุชูุณุงุญ ูุงุณุชููู ูุฑุชุงุญุงู ูู ูุณุท ุงูููุฑ. ูุญูููุง ุฃุบูุถ ุนูููู ูุณูู ูุชุญุช ุฃูููุฉ ุจุงุจูุง ุจูุฏูุก ูุฎุฑุฌุช ุฅูู ุงูููุฑ ููุถุนุช ุบูุงู ุงููุฌูุฉ ุงููุงุฑุบ ุฃูุงู ุฃูู ุงูุชูุณุงุญ ยซุฑุฌุงุกยป ููุณุช ยซ ุฑุฌุงุก ุงุฑุฌุน ุฅูู ุจูุชูยป. ุนุงุฏุช ุฅูู ุบุฑูุชูุง ูุฃุฎุฐุช ุชูุธุฑ ูู ุฎูุงู ุซูุจ ุงูุจุงุจ ูุฑุฃุช ุงูุชูุณุงุญ ูุนูุฏ ุฅูู ุบูุงู ุงููุฌูุฉ.

ุฐูุจุช ุงูุขู ุจุญุฐุฑ ุฅูู ุบุฑูุฉ ุงููุนูุดุฉ ุญูุซ ุงุฒุฏุญูุช ุทููุฑ ุงูุจุฌุน ุญูู ุงูุฃุฑููุฉ ูุนูู ุงูุชููุงุฒ. ูุชุญุช ุฃูููุฉ ุงููุฌูุฉ ุนูู ุงูุตูุญุฉ ุงูุฎุงููุฉ ูู ุงูุตูุฑุฉ ยซุดูุฑุงูยป ูุงูุช ยซุดูุฑุงู ูุซูุฑุงู ูููุ ูููููู ุงูุนูุฏุฉ ุงูุขู ุฅูู ุงููุณุชููุนยป.

ูู ุงูุตุจุงุญ ูุงู ูู ุงูุตุนุจ ุนูููุง ุฃู ุชุดุฑุญ ููุงูุฏููุง ุนู ุจูุนุฉ ุงูุจูู ุงููุจูุฑุฉ ุนูู ุงูุฃุฑุถ ูุงูุจุงุจ ุงูููุณูุฑ ูู ููููุง ููุชูุนูู ุนู ุจุงูุชูุณุงุญ ูุน ุฃู ูุจุนุฉ ูุงูุฏุชูุง ูุง ุฒุงูุช ููููุฏุฉ.`;

        const questions = {
            "ูุบุฉ ุนุฑุจูุฉ": {
                "ุณูู": [
                    { q: "ูุง ูู ุฌูุน ูููุฉ 'ูุชุงุจ'ุ", options: ["ูุชุจ", "ูุชุงุจุงุช", "ูุชุงุชูุจ", "ููุชุจุฉ"], correct: 0, type: "multiple_choice" },
                    { q: "ุตู ุจูู ุงููููุฉ ููุนูุงูุง", type: "matching", leftColumn: ["ุดูุณ", "ููุฑ", "ูุฌู", "ุฃุฑุถ"], rightColumn: ["ูููุจ ูุนูุด ุนููู", "ููุฑ ุงูููุงุฑ", "ููุฑ ุงูููู", "ุถูุก ูู ุงูุณูุงุก"], correctMatches: {"ุดูุณ": "ููุฑ ุงูููุงุฑ", "ููุฑ": "ููุฑ ุงูููู", "ูุฌู": "ุถูุก ูู ุงูุณูุงุก", "ุฃุฑุถ": "ูููุจ ูุนูุด ุนููู"} },
                    { q: "ุฑุชุจ ุงููููุงุช ุญุณุจ ุงูุญุฌู ูู ุงูุฃุตุบุฑ ุฅูู ุงูุฃูุจุฑ", type: "ordering", items: ["ููู", "ูููุฉ", "ูุทุฉ", "ุญุตุงู"], correctOrder: ["ูููุฉ", "ูุทุฉ", "ุญุตุงู", "ููู"] },
                    { q: "ุงุฎุชุฑ ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ: ุฃู ูู ูุฐู ุญุฑูู ุงูุฌุฑุ", options: ["ูู", "ููุชุจ", "ุฅูู", "ูู", "ุทุงูุจ", "ุนูู"], correct: [0, 2, 3, 5], type: "multiple_select" },
                    { q: "ูุง ูู ููุฑุฏ ูููุฉ 'ุทูุงุจ'ุ", options: ["ุทุงูุจ", "ุทุงูุจุฉ", "ุชูููุฐ", "ุฏุงุฑุณ"], correct: 0, type: "multiple_choice" },
                    { q: "ุตู ุจูู ุงููุนู ูุฒููู", type: "matching", leftColumn: ["ูุชุจ", "ููุชุจ", "ุงูุชุจ", "ุณููุชุจ"], rightColumn: ["ุฃูุฑ", "ูุงุถู", "ูุถุงุฑุน", "ูุณุชูุจู"], correctMatches: {"ูุชุจ": "ูุงุถู", "ููุชุจ": "ูุถุงุฑุน", "ุงูุชุจ": "ุฃูุฑ", "ุณููุชุจ": "ูุณุชูุจู"} },
                    { q: "ุฑุชุจ ุฃุญุฑู ุงููุฌุงุก ุจุงูุชุฑุชูุจ ุงูุตุญูุญ", type: "ordering", items: ["ุฏ", "ุฌ", "ุฃ", "ุจ"], correctOrder: ["ุฃ", "ุจ", "ุฌ", "ุฏ"] },
                    { q: "ุงุฎุชุฑ ุฌููุน ุงูุฃุณูุงุก ูู ุงููุงุฆูุฉ ุงูุชุงููุฉ", options: ["ูุญูุฏ", "ูุฌุฑู", "ูุชุงุจ", "ูู", "ูุฏุฑุณุฉ", "ุฌููู"], correct: [0, 2, 4, 5], type: "multiple_select" },
                    { q: "ูุง ูู ุถุฏ ูููุฉ 'ููุฑ'ุ", options: ["ุธูุงู", "ุถูุก", "ุดูุณ", "ููุฑ"], correct: 0, type: "multiple_choice" },
                    { q: "ุตู ุจูู ุงูุญููุงู ูุตูุชู", type: "matching", leftColumn: ["ุฃุณุฏ", "ุญุตุงู", "ุทุงุฆุฑ", "ูุทุฉ"], rightColumn: ["ููุงุก", "ุฒุฆูุฑ", "ุตููู", "ุชุบุฑูุฏ"], correctMatches: {"ุฃุณุฏ": "ุฒุฆูุฑ", "ุญุตุงู": "ุตููู", "ุทุงุฆุฑ": "ุชุบุฑูุฏ", "ูุทุฉ": "ููุงุก"} },
                    { q: "ุฑุชุจ ุงูุฌููุฉ ุจุงูุชุฑุชูุจ ุงูุตุญูุญ", type: "ordering", items: ["ูู", "ููุนุจ", "ุงูุทูู", "ุงูุญุฏููุฉ"], correctOrder: ["ููุนุจ", "ุงูุทูู", "ูู", "ุงูุญุฏููุฉ"] },
                    { q: "ุงุฎุชุฑ ุฌููุน ุงูุฃููุงู ูู ุงููุงุฆูุฉ", options: ["ุฃุญูุฑ", "ุทุงููุฉ", "ุฃุฒุฑู", "ุฃุฎุถุฑ", "ูุชุงุจ", "ุฃุตูุฑ"], correct: [0, 2, 3, 5], type: "multiple_select" },
                    { q: "ูุง ููุน ูููุฉ 'ููุนุจ'ุ", options: ["ุงุณู", "ูุนู", "ุญุฑู", "ุถููุฑ"], correct: 1, type: "multiple_choice" },
                    { q: "ุตู ุจูู ุงูุนุฏุฏ ูุงูุฑูู", type: "matching", leftColumn: ["ูุงุญุฏ", "ุงุซูุงู", "ุซูุงุซุฉ", "ุฃุฑุจุนุฉ"], rightColumn: ["4", "1", "2", "3"], correctMatches: {"ูุงุญุฏ": "1", "ุงุซูุงู": "2", "ุซูุงุซุฉ": "3", "ุฃุฑุจุนุฉ": "4"} },
                    { q: "ุฑุชุจ ุงูุฃูุงู ุญุณุจ ุชุฑุชูุจูุง ูู ุงูุฃุณุจูุน", type: "ordering", items: ["ุงูุฃุฑุจุนุงุก", "ุงูุงุซููู", "ุงูุซูุงุซุงุก", "ุงูุฃุญุฏ"], correctOrder: ["ุงูุฃุญุฏ", "ุงูุงุซููู", "ุงูุซูุงุซุงุก", "ุงูุฃุฑุจุนุงุก"] },
                    { q: "ุงุฎุชุฑ ุฌููุน ุฃุนุถุงุก ุงูุฌุณู", options: ["ูุฏ", "ุดุฌุฑุฉ", "ุนูู", "ุฑุฌู", "ุณูุงุฑุฉ", "ุฃูู"], correct: [0, 2, 3, 5], type: "multiple_select" },
                    { q: "ูุง ูู ุฌูุน ูููุฉ 'ููู'ุ", options: ["ุฃููุงู", "ูููุงู", "ูููู", "ููุงุฆู"], correct: 0, type: "multiple_choice" },
                    { q: "ุตู ุจูู ุงูุดูุฑ ูุงููุตู", type: "matching", leftColumn: ["ููุงูุฑ", "ููููู", "ุฃูุชูุจุฑ", "ุฃุจุฑูู"], rightColumn: ["ุฑุจูุน", "ุดุชุงุก", "ุตูู", "ุฎุฑูู"], correctMatches: {"ููุงูุฑ": "ุดุชุงุก", "ููููู": "ุตูู", "ุฃูุชูุจุฑ": "ุฎุฑูู", "ุฃุจุฑูู": "ุฑุจูุน"} },
                    { q: "ุฑุชุจ ุงููููุงุช ุญุณุจ ุงูุชุฑุชูุจ ุงูุฃุจุฌุฏู", type: "ordering", items: ["ุฏุงุฑ", "ุจูุช", "ุฌุจู", "ุฃุณุฏ"], correctOrder: ["ุฃุณุฏ", "ุจูุช", "ุฌุจู", "ุฏุงุฑ"] },
                    { q: "ุงุฎุชุฑ ุฌููุน ุงูููุงูู ูู ุงููุงุฆูุฉ", options: ["ุชูุงุญ", "ุฎูุงุฑ", "ููุฒ", "ุจุฑุชูุงู", "ุฌุฒุฑ", "ุนูุจ"], correct: [0, 2, 3, 5], type: "multiple_select" },
                    { q: "ูุง ูู ูุซูู ูููุฉ 'ุจูุช'ุ", options: ["ุจูุชุงู", "ุจููุช", "ุฃุจูุงุช", "ุจูุชูู"], correct: 0, type: "multiple_choice" },
                    { q: "ูุง ูู ุชุฃููุซ ูููุฉ 'ูุนูู'ุ", options: ["ูุนููุฉ", "ูุนููุงุช", "ูุนููุงู", "ูุนูููู"], correct: 0, type: "multiple_choice" }
                ],
                "ูุชูุณุท": [
                    { q: "ูุง ุฅุนุฑุงุจ ูููุฉ 'ูุญูุฏ' ูู ุงูุฌููุฉ: 'ุฌุงุก ูุญูุฏ'ุ", options: ["ูุงุนู ูุฑููุน", "ููุนูู ุจู ููุตูุจ", "ูุจุชุฏุฃ ูุฑููุน", "ุฎุจุฑ ูุฑููุน"], correct: 0, type: "multiple_choice" },
                    { q: "ุฑุชุจ ุฃุฑูุงู ุงูุฌููุฉ ุงูุงุณููุฉ", type: "drag_drop", items: ["ุงูุฎุจุฑ", "ุงููุจุชุฏุฃ", "ุงูุตูุฉ", "ุงูุญุงู"], correctOrder: ["ุงููุจุชุฏุฃ", "ุงูุฎุจุฑ", "ุงูุตูุฉ", "ุงูุญุงู"] },
                    { q: "ุงุฎุชุฑ ููุน ุงูููุฒุฉ ูู ูููุฉ 'ุฃูู'", type: "dropdown", options: ["ููุฒุฉ ูุทุน", "ููุฒุฉ ูุตู", "ููุฒุฉ ูุชูุณุทุฉ", "ููุฒุฉ ูุชุทุฑูุฉ"], correct: 0 },
                    { q: "ุงุณุญุจ ุงูููุทุฉ ุฅูู ูููุน ุงูููุนูู ุจู ูู ุงูุฌููุฉ (1-4): 'ูุฑุฃ ุงูุทุงูุจ ุงููุชุงุจ ุจุชูุนู'", type: "click_drag", range: [1, 4], correct: 3 },
                    { q: "ุงูุชุจ ููุฑุฉ ูุตูุฑุฉ ุนู ุฃูููุฉ ุงููุฑุงุกุฉ", type: "essay", modelAnswer: "ุงููุฑุงุกุฉ ูููุฉ ุฌุฏุงู ูู ุญูุงุชูุง ูุฃููุง ุชููู ุงูุนูู ูุชุฒูุฏ ุงููุนุฑูุฉ ูุชุญุณู ุงููุบุฉ ูุชูุณุน ุงูุฎูุงู ูุชุณุงุนุฏ ุนูู ุงูุชูููุฑ ุงูููุฏู" },
                    { q: "ูุง ููุน ุงูุฌููุฉ: 'ุฅู ุงููู ุบููุฑ ุฑุญูู'ุ", options: ["ูุนููุฉ", "ุงุณููุฉ ููุณูุฎุฉ", "ุงุณููุฉ ุจุณูุทุฉ", "ุดุฑุทูุฉ"], correct: 1, type: "multiple_choice" },
                    { q: "ูุง ุฅุนุฑุงุจ ูููุฉ 'ุงููุชุงุจ' ูู: 'ูุฑุฃุช ุงููุชุงุจ'ุ", options: ["ูุงุนู", "ููุนูู ุจู", "ูุจุชุฏุฃ", "ุฎุจุฑ"], correct: 1, type: "multiple_choice" },
                    { q: "ุฑุชุจ ุญุฑูู ุงูุฌุฑ ุญุณุจ ุงูุชุฑุชูุจ ุงูุฃุจุฌุฏู", type: "drag_drop", items: ["ูู", "ุฅูู", "ูู", "ุนูู"], correctOrder: ["ุฅูู", "ูู", "ุนูู", "ูู"] },
                    { q: "ุงุฎุชุฑ ุงููุนู ุงููุถุงุฑุน ุงููุฑููุน: ุงูุทุงูุจ ___ ุงูุฏุฑุณ", type: "dropdown", options: ["ูุฑุฃ", "ููุฑุฃ", "ุงูุฑุฃ", "ูุฑุงุกุฉ"], correct: 1 },
                    { q: "ุงุณุญุจ ุงูููุทุฉ ุฅูู ุนุฏุฏ ุฃููุงุน ุงููููุฉ ูู ุงูุนุฑุจูุฉ (ูู 1-10)", type: "click_drag", range: [1, 10], correct: 3 },
                    { q: "ูุง ููุน 'ูุงู' ูู ุงูุฌููุฉ: 'ูุงู ุงูุทุงูุจ ูุฌุชูุฏุงู'ุ", options: ["ูุนู ูุงุถ", "ูุนู ูุงุณุฎ", "ุญุฑู ูุงุณุฎ", "ุงุณู"], correct: 1, type: "multiple_choice" },
                    { q: "ูุง ุฅุนุฑุงุจ 'ูุฌุชูุฏุงู' ูู: 'ูุงู ุงูุทุงูุจ ูุฌุชูุฏุงู'ุ", options: ["ูุงุนู", "ููุนูู ุจู", "ุฎุจุฑ ูุงู", "ุญุงู"], correct: 2, type: "multiple_choice" },
                    { q: "ุฑุชุจ ุนูุงูุงุช ุงูุฅุนุฑุงุจ ุงูุฃุตููุฉ", type: "drag_drop", items: ["ุงููุณุฑุฉ", "ุงูุถูุฉ", "ุงููุชุญุฉ", "ุงูุณููู"], correctOrder: ["ุงูุถูุฉ", "ุงููุชุญุฉ", "ุงููุณุฑุฉ", "ุงูุณููู"] },
                    { q: "ุงุฎุชุฑ ุงููุจูู ูู ุงูุฃูุนุงู ุงูุชุงููุฉ", type: "dropdown", options: ["ููุชุจ", "ูุชุจ", "ููุชุจุงู", "ุชูุชุจ"], correct: 1 },
                    { q: "ุงุณุญุจ ุงูููุทุฉ ุฅูู ุนุฏุฏ ุญุฑูู ุงูุนุทู (ูู 1-15)", type: "click_drag", range: [1, 15], correct: 9 },
                    { q: "ูุง ููุน ุงูุชุงุก ูู ูููุฉ 'ูุฏุฑุณุฉ'ุ", options: ["ุชุงุก ูุฑุจูุทุฉ", "ุชุงุก ููุชูุญุฉ", "ุชุงุก ุงููุงุนู", "ุชุงุก ุงูุชุฃููุซ"], correct: 0, type: "multiple_choice" },
                    { q: "ูุง ุฅุนุฑุงุจ 'ุฅู' ูู: 'ุฅู ุงููู ุบููุฑ'ุ", options: ["ุญุฑู ุฌุฑ", "ุญุฑู ูุงุณุฎ", "ุญุฑู ุนุทู", "ุญุฑู ููู"], correct: 1, type: "multiple_choice" },
                    { q: "ุฑุชุจ ุฃูุณุงู ุงููุนู ูู ุญูุซ ุงูุฒูู", type: "drag_drop", items: ["ุฃูุฑ", "ูุงุถ", "ูุถุงุฑุน", "ูุณุชูุจู"], correctOrder: ["ูุงุถ", "ูุถุงุฑุน", "ุฃูุฑ", "ูุณุชูุจู"] },
                    { q: "ุงุฎุชุฑ ุงููุนุฑุจ ูู ุงูุฃุณูุงุก ุงูุชุงููุฉ", type: "dropdown", options: ["ูุฐุง", "ูุญูุฏ", "ุงูุชู", "ุญูุซ"], correct: 1 },
                    { q: "ุงุณุญุจ ุงูููุทุฉ ุฅูู ุนุฏุฏ ุฃุญุฑู ุงูููููุฉ (ูู 1-10)", type: "click_drag", range: [1, 10], correct: 5 },
                    { q: "ูุง ููุน ุงูุฌููุฉ: 'ูุง ุชูุฐุจ'ุ", options: ["ุฎุจุฑูุฉ", "ุฅูุดุงุฆูุฉ ุทูุจูุฉ", "ุฅูุดุงุฆูุฉ ุบูุฑ ุทูุจูุฉ", "ุดุฑุทูุฉ"], correct: 1, type: "multiple_choice" }
                ],
                "ุตุนุจ": [
                    { q: "ูุง ุฅุนุฑุงุจ 'ุบูุฑ' ูู ุงูุฌููุฉ: 'ุฌุงุก ุงูุทูุงุจ ุบูุฑ ูุญูุฏ'ุ", options: ["ุญุงู ููุตูุจ", "ูุณุชุซูู ููุตูุจ", "ุตูุฉ ูุฌุฑูุฑุฉ", "ูุถุงู ุฅููู"], correct: 1, type: "multiple_choice" },
                    { q: "ุฑุชุจ ุชูุนููุงุช ุงูุจุญุฑ ุงูุทููู", type: "drag_drop", items: ["ููุงุนููู", "ูุนููู", "ููุงุนููู", "ูุนููู"], correctOrder: ["ูุนููู", "ููุงุนููู", "ูุนููู", "ููุงุนููู"] },
                    { q: "ุงุฎุชุฑ ููุน ุงููุดุชู ูู ูููุฉ 'ููุชูุจ'", type: "dropdown", options: ["ุงุณู ูุงุนู", "ุงุณู ููุนูู", "ุตูุบุฉ ูุจุงูุบุฉ", "ุงุณู ููุงู"], correct: 1 },
                    { q: "ุงุณุญุจ ุงูููุทุฉ ุฅูู ุนุฏุฏ ุญุฑูู ุงูุฌุฒู (ูู 1-20)", type: "click_drag", range: [1, 20], correct: 4 },
                    { q: "ุงูุชุจ ุชุญูููุงู ูุญููุงู ููุตูุงู ููุฌููุฉ: 'ูุงู ุงูุทุงูุจ ุงููุฌุชูุฏ ูุฏุฑุณ ูู ุงูููุชุจุฉ'", type: "essay", modelAnswer: "ูุงู: ูุนู ูุงุถ ูุงุณุฎ ูุจูู ุนูู ุงููุชุญุ ุงูุทุงูุจ: ุงุณู ูุงู ูุฑููุน ูุนูุงูุฉ ุฑูุนู ุงูุถูุฉุ ุงููุฌุชูุฏ: ุตูุฉ ูุฑููุนุฉ ูุนูุงูุฉ ุฑูุนูุง ุงูุถูุฉุ ูุฏุฑุณ: ูุนู ูุถุงุฑุน ูุฑููุน ูุนูุงูุฉ ุฑูุนู ุงูุถูุฉ ูุงููุงุนู ุถููุฑ ูุณุชุชุฑ ุชูุฏูุฑู ูู ููู ุฎุจุฑ ูุงู ูู ูุญู ูุตุจุ ูู: ุญุฑู ุฌุฑุ ุงูููุชุจุฉ: ุงุณู ูุฌุฑูุฑ ูุนูุงูุฉ ุฌุฑู ุงููุณุฑุฉ ูุงูุฌุงุฑ ูุงููุฌุฑูุฑ ูุชุนููุงู ุจุงููุนู ูุฏุฑุณ" },
                    { q: "ูุง ููุน 'ูุง' ูู ุงูุฌููุฉ: 'ูุง ุฃุฌูู ุงูุณูุงุก!'ุ", options: ["ูุงููุฉ", "ุงุณุชููุงููุฉ", "ุชุนุฌุจูุฉ", "ููุตููุฉ"], correct: 2, type: "multiple_choice" },
                    { q: "ูุง ุฅุนุฑุงุจ 'ุฅูุงู' ูู: 'ุฅูุงู ูุนุจุฏ'ุ", options: ["ููุนูู ุจู", "ูุงุนู", "ูุจุชุฏุฃ", "ุฎุจุฑ"], correct: 0, type: "multiple_choice" },
                    { q: "ุฑุชุจ ุฃููุงุน ุงููุนุงุฑู ูู ุงูุฃุนุฑู ุฅูู ุงูุฃูู ุชุนุฑููุงู", type: "drag_drop", items: ["ุงููุนุฑู ุจุฃู", "ุงูุถููุฑ", "ุงูุนูู", "ุงููุถุงู ูููุนุฑูุฉ"], correctOrder: ["ุงูุถููุฑ", "ุงูุนูู", "ุงููุนุฑู ุจุฃู", "ุงููุถุงู ูููุนุฑูุฉ"] },
                    { q: "ุงุฎุชุฑ ููุน ุงูุงุณุชุซูุงุก ูู: 'ูุง ุฌุงุก ุฅูุง ูุญูุฏ'", type: "dropdown", options: ["ุชุงู ูุซุจุช", "ุชุงู ูููู", "ูุงูุต ูููู", "ููุฑุบ"], correct: 3 },
                    { q: "ุงุณุญุจ ุงูููุทุฉ ุฅูู ุนุฏุฏ ุจุญูุฑ ุงูุดุนุฑ ุงูุนุฑุจู (ูู 1-20)", type: "click_drag", range: [1, 20], correct: 16 },
                    { q: "ูุง ููุน ุงูุฅุนูุงู ูู ูููุฉ 'ูุงู' ุฃุตููุง 'ููู'ุ", options: ["ููุจ", "ุญุฐู", "ููู", "ุฅุดุจุงุน"], correct: 0, type: "multiple_choice" },
                    { q: "ูุง ุฅุนุฑุงุจ 'ุญูุซ' ูู: 'ุฌูุณุช ุญูุซ ุฌูุณ ุฃุจู'ุ", options: ["ุธุฑู ููุงู", "ุงุณู ููุตูู", "ุญุฑู ุฌุฑ", "ููุนูู ููู"], correct: 0, type: "multiple_choice" },
                    { q: "ุฑุชุจ ูุฑุงุญู ุชุทูุฑ ุงูุฎุท ุงูุนุฑุจู", type: "drag_drop", items: ["ุงููุณุฎ", "ุงููููู", "ุงูุซูุซ", "ุงูุฑูุนุฉ"], correctOrder: ["ุงููููู", "ุงููุณุฎ", "ุงูุซูุซ", "ุงูุฑูุนุฉ"] },
                    { q: "ุงุฎุชุฑ ููุน ุงูุจุฏู ูู: 'ุฌุงุก ุงูุทุงูุจ ูุญูุฏ'", type: "dropdown", options: ["ุจุฏู ูู ูู ูู", "ุจุฏู ุจุนุถ ูู ูู", "ุจุฏู ุงุดุชูุงู", "ุจุฏู ูุทุงุจู"], correct: 0 },
                    { q: "ุงุณุญุจ ุงูููุทุฉ ุฅูู ุนุฏุฏ ุฃูุฒุงู ุงููุนู ุงูุซูุงุซู ุงููุฌุฑุฏ (ูู 1-10)", type: "click_drag", range: [1, 10], correct: 6 },
                    { q: "ูุง ููุน ุงูููุฒุฉ ูู ูููุฉ 'ูุณุคูู'ุ", options: ["ููุฒุฉ ูุทุน", "ููุฒุฉ ูุตู", "ููุฒุฉ ูุชูุณุทุฉ", "ููุฒุฉ ูุชุทุฑูุฉ"], correct: 2, type: "multiple_choice" },
                    { q: "ูุง ุฅุนุฑุงุจ 'ูููุง' ูู: 'ูููุง ุงููุทุฑ ูุฎุฑุฌุช'ุ", options: ["ุญุฑู ุดุฑุท", "ุญุฑู ุงูุชูุงุน ููุฌูุฏ", "ุญุฑู ุฌุฑ", "ุญุฑู ูุตุจ"], correct: 1, type: "multiple_choice" },
                    { q: "ุฑุชุจ ุฃูุณุงู ุงูููุงู ูู ุญูุซ ุงูุฅุนุฑุงุจ ูุงูุจูุงุก", type: "drag_drop", items: ["ุงูุญุฑู", "ุงูุงุณู", "ุงููุนู ุงููุถุงุฑุน", "ุงููุนู ุงููุงุถู"], correctOrder: ["ุงูุงุณู", "ุงููุนู ุงููุถุงุฑุน", "ุงููุนู ุงููุงุถู", "ุงูุญุฑู"] },
                    { q: "ุงุฎุชุฑ ุงููุตุฏุฑ ุงูุตูุงุนู ูู ุงููููุงุช ุงูุชุงููุฉ", type: "dropdown", options: ["ูุชุงุจุฉ", "ุฅูุณุงููุฉ", "ููุชุจุฉ", "ูุงุชุจ"], correct: 1 },
                    { q: "ุงุณุญุจ ุงูููุทุฉ ุฅูู ุนุฏุฏ ุฃุญุฑู ุงูุฅุทุจุงู (ูู 1-10)", type: "click_drag", range: [1, 10], correct: 4 },
                    { q: "ูุง ููุน ุงูุชุดุจูู ูู: 'ูุญูุฏ ูุงูุฃุณุฏ ูู ุงูุดุฌุงุนุฉ'ุ", options: ["ูุฑุณู ูุฌูู", "ูุคูุฏ ููุตู", "ูุฑุณู ููุตู", "ูุคูุฏ ูุฌูู"], correct: 2, type: "multiple_choice" }
                ],
                "ููู ุงูููุฑูุก": [
                    { q: "ูุง ูู ุฃูู ุฅุดุงุฑุฉ ุชุจูู ุญุฏูุซ ุดูุก ุบูุฑ ุนุงุฏูุ (ุงุฑุฌุน ุฅูู ุงูููุฑุฉ 2)", options: ["ุชุญุฑู ูููุฉ ุงูุตุญู ูุงููุฌูุงุช", "ุฑุคูุฉ ุฃูููุฉ ูุบูุงู ุงููุฌูุฉ", "ุจุงุจ ุบุฑูุชูุง ูุงู ููุณูุฑุงู", "ุณูุงุนูุง ูุตูุช ูุงููุณูุณ"], correct: 3, type: "multiple_choice", level: "ุงุณุชุฑุฌุงุน" },
                    { q: "ูู ุฃูู ุฌุงุก ุงูุชูุณุงุญุ (ุงุฑุฌุน ุฅูู ุงูููุฑุฉ 3)", options: ["ุงูุญูุงู", "ุบูุงู ุงููุฌูุฉ", "ุชุญุช ุงูุณุฑูุฑ", "ุงูููุฑ ุงููุฑูุจ"], correct: 1, type: "multiple_choice", level: "ุงุณุชุฑุฌุงุน" },
                    { q: "ุฃู ุงููููุงุช ุชุจูู ุฃู ุฃูููุฉ ูุงูุช ุฎุงุฆูุฉุ", options: ["ุชุฌูุฏุช ุฃูููุฉ ูู ููุงููุง", "ูู ุชุตุฏู ุนููููุง", "ุงุชุณุนุช ุนููุงูุง ูุตุญูู ููุฌุงู", "ุตูุช ููุฎูุถ ูุงููุณูุณ"], correct: 0, type: "multiple_choice", level: "ุชูุณูุฑ" },
                    { q: "ููุงุฐุง ููุฑุช ุฃูููุฉ ุฃู ุงูุชูุณุงุญ ุณูู ููุฌูุ", options: ["ุฃุธูุฑ ุตู ุฃุณูุงูู ุงูุทูููุฉ", "ุฃุตุฏุฑ ุตูุชุงู ูุงููุณูุณ", "ุจุฏุฃ ูุดุฎุฑ ูููุฎุฑ", "ุญุฑู ุฐููู ุฅูู ุงูุฃูุงู ูุงูุฎูู"], correct: 3, type: "multiple_choice", level: "ุงุณุชูุชุงุฌ" },
                    { q: "ุฑุชุจ ูุฐู ุงูุฌูู ุญุณุจ ุชุฑุชูุจ ุญุฏูุซูุง ูู ุงููุตุฉ", type: "ordering", items: ["ุฑุฃุช ุฃูููุฉ ุงูุชูุณุงุญ", "ุฃูู ุงูุชูุณุงุญ ุทูุฑูู ูู ุงูุจุฌุน", "ุญุงููุช ุฃูููุฉ ุฃู ุชุดุฑุญ ููุงูุฏููุง ุณุจุจ ูุณุฑ ุงูุจุงุจ", "ุจุฏุฃุช ุฃูููุฉ ูุดููุง ุฅูู ุงูุญูุงู", "ุฑูุถุช ุฃูููุฉ ุฅูู ุบุฑูุชูุง ูุฃุบููุช ุงูุจุงุจ"], correctOrder: ["ุจุฏุฃุช ุฃูููุฉ ูุดููุง ุฅูู ุงูุญูุงู", "ุฑุฃุช ุฃูููุฉ ุงูุชูุณุงุญ", "ุฑูุถุช ุฃูููุฉ ุฅูู ุบุฑูุชูุง ูุฃุบููุช ุงูุจุงุจ", "ุฃูู ุงูุชูุณุงุญ ุทูุฑูู ูู ุงูุจุฌุน", "ุญุงููุช ุฃูููุฉ ุฃู ุชุดุฑุญ ููุงูุฏููุง ุณุจุจ ูุณุฑ ุงูุจุงุจ"], level: "ุฏูุฌ ุงููุนูููุงุช" },
                    { q: "ููุงุฐุง ูุงุฏุช ุฃูููุฉ ุทููุฑ ุงูุจุฌุนุ ุงุดุฑุญ ุงูุณุจุจ ุจุงูุชูุตูู", type: "essay", modelAnswer: "ูุงุฏุช ุฃูููุฉ ุทููุฑ ุงูุจุฌุน ูุฃููุง ููุฑุช ุฃู ุงูุชูุณุงุญ ุฌุงุฆุน ููุญุชุงุฌ ุฅูู ุทุนุงู ููุบุงุฏุฑ ุงูุจูุชุ ููุฏ ูุฑุฃุช ูู ูุฌูุฉ ุงูุญููุงู ุฃู ุทููุฑ ุงูุจุฌุน ุชุดุจู ูุนูุฉ ุนูุฏ ุงููููุงุฏ ููุชูุงุณูุญุ ูุฃุฑุงุฏุช ุฅุทุนุงูู ุญุชู ูุดุจุน ููุนูุฏ ุฅูู ููุงูู ูู ุงููุฌูุฉ", level: "ุฏูุฌ ุงููุนูููุงุช" },
                    { q: "ูุง ุณุจุจ ูุณุฑ ุงูุจุงุจุ (ุงุฑุฌุน ุฅูู ุงูููุฑุฉ 7)", options: ["ุถุฑุจ ุงูุชูุณุงุญ ุงูุจุงุจ ุจุฐููู ูุงุฎุชุฑูู", "ุถุฑุจุชู ุงููุฒูุฑูุฉ ุงููุจูุฑุฉ", "ุงููููุงุฑ ุงูุญุงุฏ ูุทุงุฆุฑ ุงูุจุฌุน ุงุตุทุฏู ุจู", "ุงุตุทุฏู ุจู ุงูุณุฑูุฑ"], correct: 0, type: "multiple_choice", level: "ุงุณุชุฑุฌุงุน" },
                    { q: "ูู ุนูุฑ ุฃูููุฉ ูู ุงููุตุฉุ (ุงุฑุฌุน ุฅูู ุงูููุฑุฉ 1)", options: ["ุชุณุน ุณููุงุช", "ุนุดุฑ ุณููุงุช", "ุฅุญุฏู ุนุดุฑุฉ ุณูุฉ", "ุซูุงูู ุณููุงุช"], correct: 1, type: "multiple_choice", level: "ุงุณุชุฑุฌุงุน" },
                    { q: 'ุงุถุบุท ุนูู ูุฐุง ุงูุฑุงุจุท ูุงุฐูุฑ ูุนูููุฉ ุฌุฏูุฏุฉ ุนู ุงูุชูุณุงุญ: <a href="https://ar.wikipedia.org/wiki/%D8%AA%D9%85%D8%B3%D8%A7%D8%AD" target="_blank">ุฅุถุบุท ููุง</a>', type: 'essay', modelAnswer: 'ุงูุชูุงุณูุญ ูู ุงูุฒูุงุญู ุงููุงุฆูุฉ ุงููุจูุฑุฉ ูุชุนูุด ูู ุงูููุงุทู ุงูุงุณุชูุงุฆูุฉ ูุดุจู ุงูุงุณุชูุงุฆูุฉุ ูููุง ูุฏุฑุฉ ุนูู ุงูุจูุงุก ุชุญุช ุงููุงุก ููุชุฑุงุช ุทูููุฉุ ูุชุชุบุฐู ุนูู ุงูุฃุณูุงู ูุงูุทููุฑ ูุงูุซุฏููุงุช ุงูุตุบูุฑุฉ', level: 'ุจุญุซ ูุชุทุจูู' },
                    { q: "ุงุฎุชุฑ ุฌููุน ุงูุฃุดูุงุก ุงูุชู ุญุฏุซุช ุนูุฏูุง ุธูุฑ ุงูุชูุณุงุญ", options: ["ุชุณุงูุทุช ุงูุตุญู ูุงููุฌูุงุช", "ูุณุฑ ุงููุฒูุฑูุฉ", "ูุซุฑ ุฃุฒูุงุฑ ุฏูุงุฑ ุงูุดูุณ", "ุฃูู ุงูุทุนุงู ูู ุงููุทุจุฎ", "ุชุฑู ุงูุณุฌุงุฏ ูุจููุงู", "ุฎุทู ูุจุนุฉ ุงูุฃู"], correct: [0, 1, 2, 4], type: "multiple_select", level: "ุฏูุฌ ุงููุนูููุงุช" },
                    { q: "ุตู ุจูู ุงูุดุฎุตูุฉ ูุงููุนู", type: "matching", leftColumn: ["ุฃูููุฉ", "ุงูุชูุณุงุญ", "ุทููุฑ ุงูุจุฌุน", "ุงููุงูุฏุงู"], rightColumn: ["ูู ูุตุฏูุง ุงููุตุฉ", "ุฏูุนุช ุงูุณุฑูุฑ ุฎูู ุงูุจุงุจ", "ุฃูู ุทุงุฆุฑูู", "ุฎุทูุช ูุจุนุฉ ุงูุฃู"], correctMatches: {"ุฃูููุฉ": "ุฏูุนุช ุงูุณุฑูุฑ ุฎูู ุงูุจุงุจ", "ุงูุชูุณุงุญ": "ุฃูู ุทุงุฆุฑูู", "ุทููุฑ ุงูุจุฌุน": "ุฎุทูุช ูุจุนุฉ ุงูุฃู", "ุงููุงูุฏุงู": "ูู ูุตุฏูุง ุงููุตุฉ"}, level: "ุฏูุฌ ุงููุนูููุงุช" },
                    { q: "ุฑุชุจ ุงูุฃุญุฏุงุซ ุญุณุจ ุชุณูุณููุง ูู ุงููุตุฉ", type: "ordering", items: ["ุฎุฑูุฌ ุทููุฑ ุงูุจุฌุน", "ุงูุชุดุงู ุงููุฌูุฉ ุงููุงุฑุบุฉ", "ุณูุงุน ุตูุช ุงููุณูุณ", "ุนูุฏุฉ ุงูุชูุณุงุญ ูููุฌูุฉ"], correctOrder: ["ุณูุงุน ุตูุช ุงููุณูุณ", "ุงูุชุดุงู ุงููุฌูุฉ ุงููุงุฑุบุฉ", "ุฎุฑูุฌ ุทููุฑ ุงูุจุฌุน", "ุนูุฏุฉ ุงูุชูุณุงุญ ูููุฌูุฉ"], level: "ุฏูุฌ ุงููุนูููุงุช" },
                    { q: "ููุงุฐุง ูู ุชูุชู ุฃูููุฉ ุจุงูุตูุช ูู ุงูุจุฏุงูุฉุ", options: ["ูุฃููุง ูุงูุช ุฎุงุฆูุฉ", "ูุฃููุง ูุงูุช ูุตู ูุงุฆูุฉ", "ูุฃููุง ูู ุชุณูุนู ุฌูุฏุงู", "ูุฃููุง ุงุนุชุงุฏุช ุนูู ุงูุฃุตูุงุช"], correct: 1, type: "multiple_choice", level: "ุงุณุชูุชุงุฌ" },
                    { q: "ุงุฎุชุฑ ุฌููุน ุงูุฃุดูุงุก ุงูุชู ูุนูุชูุง ุฃูููุฉ ููุญูุงูุฉ ูู ุงูุชูุณุงุญ", options: ["ุฃุบููุช ุงูุจุงุจ ุจุดุฏุฉ", "ุฏูุนุช ุงูุณุฑูุฑ ุฎูู ุงูุจุงุจ", "ุงุฎุชุจุฃุช ุชุญุช ุงูุณุฑูุฑ", "ูุงุฏุช ุนูู ูุงูุฏููุง", "ุจูุช ูุชุฑุงุณุงู", "ูุชุญุช ุงููุงูุฐุฉ"], correct: [0, 1, 4], type: "multiple_select", level: "ุฏูุฌ ุงููุนูููุงุช" },
                    { q: "ูุงุฐุง ูุงุญุธุช ุฃูููุฉ ูู ุบูุงู ูุฌูุฉ ุงูุญููุงูุ (ุงุฑุฌุน ุฅูู ุงูููุฑุฉ 5)", type: "dropdown", options: ["ุฃุตุจุญ ุงูููุฑ ูุงุฑุบุงู ูู ุงูุชูุณุงุญ", "ุงุฎุชูุช ุงููุฌูุฉ ุชูุงูุงู", "ุชุบูุฑ ููู ุงูุบูุงู", "ุธูุฑุช ุญููุงูุงุช ุฌุฏูุฏุฉ"], correct: 0, level: "ุงุณุชุฑุฌุงุน" },
                    { q: "ุงุณุญุจ ุงูููุทุฉ ุฅูู ุนุฏุฏ ุทููุฑ ุงูุจุฌุน ุงูุชู ุฃูููุง ุงูุชูุณุงุญ (ูู 1-10) - ุงุฑุฌุน ุฅูู ุงูููุฑุฉ 10", type: "click_drag", range: [1, 10], correct: 2, level: "ุงุณุชุฑุฌุงุน" },
                    { q: "ุงูุชุจ ุฑุฃูู: ูู ุชุตุฑูุช ุฃูููุฉ ุจุฐูุงุก ูู ุญู ุงููุดููุฉุ ูููุงุฐุงุ", type: "essay", modelAnswer: "ูุนูุ ุชุตุฑูุช ุฃูููุฉ ุจุฐูุงุก ูุจูุฑ ูุฃููุง ููุฑุช ูู ุญู ุฅุจุฏุงุนู ูููุดููุฉ ุจุฏูุงู ูู ุงููุฑูุจ ุฃู ุทูุจ ุงููุณุงุนุฏุฉุ ูุงุณุชุฎุฏูุช ูุนุฑูุชูุง ูู ูุฌูุฉ ุงูุญููุงู ูุฅูุฌุงุฏ ุทุนุงู ููุงุณุจ ููุชูุณุงุญุ ูุชูููุช ูู ุฅุนุงุฏุชู ุฅูู ููุงูู ุจูุฏูุก ูุญููุฉ", level: "ุชูููู" },
                    { q: "ูุง ุงูุฐู ุฌุนู ุฃูููุฉ ุชููุฑ ูู ุฅุทุนุงู ุงูุชูุณุงุญุ", options: ["ูุตูุญุฉ ูู ูุงูุฏููุง", "ูุฑุงุกุชูุง ูู ูุฌูุฉ ุงูุญููุงู", "ุงุนุชูุงุฏูุง ุฃูู ุฌุงุฆุน", "ุฎูููุง ูู ุงูุชูุณุงุญ"], correct: 2, type: "multiple_choice", level: "ุงุณุชูุชุงุฌ" },
                    { q: "ุตู ุจูู ุงูููุงู ูุงูุญุฏุซ", type: "matching", leftColumn: ["ุชุญุช ููุถุฏุฉ ุงููุงุชู", "ุบุฑูุฉ ุฃูููุฉ", "ุงูููุฑ", "ุบุฑูุฉ ุงููุนูุดุฉ"], rightColumn: ["ุนูุฏุฉ ุทููุฑ ุงูุจุฌุน ูููุฌูุฉ", "ุจูุงุก ุงููุชุฑุงุณ", "ุฃูู ุงูุชูุณุงุญ ููุทููุฑ", "ุธููุฑ ุงูุชูุณุงุญ"], correctMatches: {"ุชุญุช ููุถุฏุฉ ุงููุงุชู": "ุธููุฑ ุงูุชูุณุงุญ", "ุบุฑูุฉ ุฃูููุฉ": "ุจูุงุก ุงููุชุฑุงุณ", "ุงูููุฑ": "ุฃูู ุงูุชูุณุงุญ ููุทููุฑ", "ุบุฑูุฉ ุงููุนูุดุฉ": "ุนูุฏุฉ ุทููุฑ ุงูุจุฌุน ูููุฌูุฉ"}, level: "ุฏูุฌ ุงููุนูููุงุช" },
                    { q: "ุฑุชุจ ูุฐู ุงูุฃุดูุงุก ุญุณุจ ุธููุฑูุง ูู ุงููุตุฉ", type: "ordering", items: ["ูุจุนุฉ ุงูุฃู ุงูููููุฏุฉ", "ุฃุฒูุงุฑ ุฏูุงุฑ ุงูุดูุณ", "ุงููุฒูุฑูุฉ ุงูููุณูุฑุฉ", "ุจูุนุฉ ุงูุจูู"], correctOrder: ["ุฃุฒูุงุฑ ุฏูุงุฑ ุงูุดูุณ", "ุงููุฒูุฑูุฉ ุงูููุณูุฑุฉ", "ูุจุนุฉ ุงูุฃู ุงูููููุฏุฉ", "ุจูุนุฉ ุงูุจูู"], level: "ุฏูุฌ ุงููุนูููุงุช" },
                    { q: "ููู ุนุฑูุช ุฃูููุฉ ุฃู ุงูุชูุณุงุญ ุฎุฑุฌ ูู ุงููุฌูุฉุ", options: ["ุฑุฃุชู ูุฎุฑุฌ ูุจุงุดุฑุฉ", "ูุฌุฏุช ุงููุฌูุฉ ูุงุฑุบุฉ", "ุฃุฎุจุฑูุง ูุงูุฏุงูุง", "ุณูุนุช ุตูุช ุฎุฑูุฌู"], correct: 1, type: "multiple_choice", level: "ุงุณุชูุชุงุฌ" },
                    { q: "ุงุฎุชุฑ ุฌููุน ุงูุฃุฏูุฉ ุงูุชู ุชุฑููุง ุงูุชูุณุงุญ ูู ุงูุจูุช", options: ["ุจูุนุฉ ุงูุจูู ุนูู ุงูุฃุฑุถ", "ุงูุจุงุจ ุงูููุณูุฑ", "ุงููุฒูุฑูุฉ ุงูููุณูุฑุฉ", "ุงูููุงูุฐ ุงูููุชูุญุฉ", "ูุจุนุฉ ุงูุฃู ุงูููููุฏุฉ", "ุงูุฃุซุงุซ ุงูููููุจ"], correct: [0, 1, 2, 4], type: "multiple_select", level: "ุฏูุฌ ุงููุนูููุงุช" },
                    { q: "ูุงุฐุง ูุงูุช ุฃูููุฉ ููุชูุณุงุญ ุนูุฏูุง ุฃุฑุงุฏุช ุฅุฑุฌุงุนูุ (ุงุฑุฌุน ุฅูู ุงูููุฑุฉ 11)", options: ["ุงุฐูุจ ุจุนูุฏุงู", "ุฑุฌุงุก ุงุฑุฌุน ุฅูู ุจูุชู", "ูุง ุชุนุฏ ูุฑุฉ ุฃุฎุฑู", "ุฃูุช ูุฎูู ุฌุฏุงู"], correct: 1, type: "multiple_choice", level: "ุงุณุชุฑุฌุงุน" },
                    { q: "ููู ุชูููุช ุฃูููุฉ ูู ุฅุฎุฑุงุฌ ุทููุฑ ุงูุจุฌุน ูู ุงููุฌูุฉุ (ุงุฑุฌุน ุฅูู ุงูููุฑุฉ 9)", type: "dropdown", options: ["ุตุฑุฎุช ุนูููุง ูุชุฎุฑุฌ ูู ุงููุณุชููุน", "ุฑุณูุชูุง ุจููุณูุง", "ุงุณุชุฎุฏูุช ุงูุนุตุง ุงูุณุญุฑูุฉ", "ุทูุจุช ุงููุณุงุนุฏุฉ ูู ูุงูุฏููุง"], correct: 0, level: "ุงุณุชุฑุฌุงุน" },
                    { q: "ูุง ุดุนูุฑ ุฃูููุฉ ุนูุฏูุง ุฑุฃุช ุงูุชูุณุงุญ ูุฃูู ูุฑุฉุ", options: ["ุงููุฑุญ ูุงูุณุนุงุฏุฉ", "ุงููุถูู ูุงูุงูุชูุงู", "ุงูุฎูู ูุงูุฐููู", "ุงูุบุถุจ ูุงูุงูุฒุนุงุฌ"], correct: 2, type: "multiple_choice", level: "ุชูุณูุฑ" },
                    { q: "ููุงุฐุง ูู ูุตุฏู ูุงูุฏุง ุฃูููุฉ ูุตุชูุงุ", options: ["ูุฃููุง ูุงูุช ุชูุฐุจ ุฏุงุฆูุงู", "ูุฃู ุงููุตุฉ ุบูุฑ ููุทููุฉ", "ูุฃูููุง ูู ูุฑูุง ุงูุชูุณุงุญ", "ูุฃููุง ูุงูุช ูุงุฆูุฉ"], correct: 1, type: "multiple_choice", level: "ุงุณุชูุชุงุฌ" },
                    { q: "ูุง ุงูุฐู ูุนูุชู ุทููุฑ ุงูุจุฌุน ุนูุฏูุง ุฎุฑุฌุชุ (ุงุฑุฌุน ุฅูู ุงูููุฑุฉ 10)", options: ["ุทุงุฑุช ุฎุงุฑุฌ ุงูุจูุช ููุฑุงู", "ุตุงุญุช ูุฑูุฑูุช ูุฑูุถุช ูู ูู ููุงู", "ุงุฎุชุจุฃุช ุชุญุช ุงูุฃุซุงุซ", "ูุงุฌูุช ุฃูููุฉ"], correct: 1, type: "multiple_choice", level: "ุงุณุชุฑุฌุงุน" },
                    { q: "ููู ุงูุชูุช ูุบุงูุฑุฉ ุฃูููุฉ ูุน ุงูุชูุณุงุญุ (ุงุฑุฌุน ุฅูู ุงูููุฑุฉ 11)", options: ["ูุฑุจ ุงูุชูุณุงุญ ูู ุงููุงูุฐุฉ", "ุนุงุฏ ุงูุชูุณุงุญ ุฅูู ุงููุฌูุฉ", "ุฃุฎุฐู ูุงูุฏุงูุง ุฅูู ุญุฏููุฉ ุงูุญููุงู", "ุจูู ุงูุชูุณุงุญ ูู ุงูุจูุช"], correct: 1, type: "multiple_choice", level: "ุงุณุชุฑุฌุงุน" },
                    { q: "ูุง ุงูุฏุฑุณ ุงูุฑุฆูุณู ูู ุงููุตุฉุ", options: ["ูุฌุจ ุนุฏู ุงููุฑุงุกุฉ ูููุงู", "ุงูุชูููุฑ ุงูุฅุจุฏุงุนู ูุณุงุนุฏ ูู ุญู ุงููุดุงูู", "ุงููุฌูุงุช ุฎุทูุฑุฉ ููุฌุจ ุชุฌูุจูุง", "ุงููุงูุฏุงู ูุง ูุตุฏูุงู ุงูุฃุทูุงู ุฃุจุฏุงู"], correct: 1, type: "multiple_choice", level: "ุชูููู" },
                    { q: "ูุนูู ูููุฉ ยซููุงุฑุจูุงยป ููุง ูุฑุฏุช ูู ุงููุต ุฃูุฑุจ ุฅูู:", options: ["ููุชูุญูุง ุนูู ูุตุฑุงุนูู", "ูุบูููุง ุจุฅุญูุงู", "ูุตู ููุชูุญ", "ููุถุงุก ุจุงููุงูู"], correct: 2, type: "multiple_choice", level: "ุชูุณูุฑ" }
                ]
            }
        };

        let currentTest = {
            subject: '',
            level: '',
            duration: 0,
            questions: [],
            answers: [],
            currentQuestion: 0,
            startTime: null,
            timerInterval: null
        };

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        function updateUI() {
            document.getElementById('schoolName').textContent = currentConfig.school_name || defaultConfig.school_name;
            document.getElementById('welcomeText').textContent = currentConfig.welcome_text || defaultConfig.welcome_text;
            document.getElementById('instructionsTitle').textContent = currentConfig.instructions_title || defaultConfig.instructions_title;
            document.getElementById('resultsTitle').textContent = currentConfig.results_title || defaultConfig.results_title;

            const customFont = currentConfig.font_family || defaultConfig.font_family;
            const baseSize = currentConfig.font_size || defaultConfig.font_size;
            const baseFontStack = 'sans-serif';

            document.body.style.fontFamily = `'${customFont}', ${baseFontStack}`;
            document.body.style.fontSize = `${baseSize}px`;

            const bgColor = currentConfig.background_color || defaultConfig.background_color;
            const surfaceColor = currentConfig.surface_color || defaultConfig.surface_color;
            const textColor = currentConfig.text_color || defaultConfig.text_color;
            const primaryColor = currentConfig.primary_action_color || defaultConfig.primary_action_color;
            const secondaryColor = currentConfig.secondary_action_color || defaultConfig.secondary_action_color;

            document.body.style.background = `linear-gradient(135deg, ${bgColor} 0%, ${adjustColor(bgColor, 20)} 100%)`;

            document.querySelectorAll('.page').forEach(page => {
                page.style.background = surfaceColor;
                page.style.color = textColor;
            });

            document.querySelectorAll('.btn').forEach(btn => {
                if (!btn.classList.contains('btn-secondary')) {
                    btn.style.background = primaryColor;
                }
            });

            document.querySelectorAll('.btn-secondary').forEach(btn => {
                btn.style.background = secondaryColor;
            });

            document.querySelectorAll('.header h1').forEach(h1 => {
                h1.style.fontSize = `${baseSize * 2.5}px`;
            });

            document.querySelectorAll('.header p').forEach(p => {
                p.style.fontSize = `${baseSize * 1.1}px`;
            });
        }

        function adjustColor(color, percent) {
            const num = parseInt(color.replace("#", ""), 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255))
                .toString(16).slice(1);
        }

        // ุชุนููู ุงููุงุฏุฉ ุชููุงุฆูุงู ููุบุฉ ุงูุนุฑุจูุฉ
        currentTest.subject = 'ูุบุฉ ุนุฑุจูุฉ';

        document.getElementById('studentName').addEventListener('input', checkFormComplete);
        document.getElementById('levelSelect').addEventListener('change', function() {
            currentTest.level = this.value;
            checkFormComplete();
        });
        document.getElementById('durationSelect').addEventListener('change', function() {
            currentTest.duration = parseInt(this.value);
            checkFormComplete();
        });

        function checkFormComplete() {
            const name = document.getElementById('studentName').value.trim();
            const subject = currentTest.subject;
            const level = currentTest.level;
            const btn = document.getElementById('continueBtn');

            if (name && subject && level) {
                btn.disabled = false;
            } else {
                btn.disabled = true;
            }
        }

        document.getElementById('continueBtn').addEventListener('click', function() {
            document.getElementById('selectedSubject').textContent = currentTest.subject;
            document.getElementById('selectedLevel').textContent = currentTest.level;
            document.getElementById('selectedDuration').textContent = currentTest.duration === 0 ? 'ุจุฏูู ุชูููุช' : currentTest.duration + ' ุฏูููุฉ';

            currentTest.questions = questions[currentTest.subject][currentTest.level];
            document.getElementById('totalQuestions').textContent = currentTest.questions.length;

            showPage('rulesPage');
        });

        document.getElementById('backToHomeBtn').addEventListener('click', function() {
            showPage('homePage');
        });

        document.getElementById('startTestBtn').addEventListener('click', function() {
            currentTest.answers = new Array(currentTest.questions.length).fill(null);
            currentTest.currentQuestion = 0;
            currentTest.startTime = Date.now();

            if (currentTest.duration > 0) {
                document.getElementById('timerContainer').style.display = 'block';
                startTimer();
            } else {
                document.getElementById('timerContainer').style.display = 'none';
            }

            showPage('testPage');
            displayQuestion();
        });

        function startTimer() {
            let timeLeft = currentTest.duration * 60;

            currentTest.timerInterval = setInterval(function() {
                timeLeft--;

                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timeRemaining').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(currentTest.timerInterval);
                    finishTest();
                }
            }, 1000);
        }

        function displayQuestion() {
            const q = currentTest.questions[currentTest.currentQuestion];
            const total = currentTest.questions.length;

            document.getElementById('currentQuestion').textContent = currentTest.currentQuestion + 1;
            document.getElementById('totalQuestionsTest').textContent = total;
            document.getElementById('questionNumber').textContent = `ุงูุณุคุงู ${currentTest.currentQuestion + 1}`;
            
            // ุฅุถุงูุฉ ูุณุชูู ุงูููู
            if (q.level) {
                const levelBadge = document.createElement('div');
                levelBadge.style.cssText = `
                    display: inline-block;
                    background: #e3f2fd;
                    color: #1565c0;
                    padding: 4px 12px;
                    border-radius: 20px;
                    font-size: 0.85em;
                    font-weight: 600;
                    margin-right: 10px;
                    border: 1px solid #bbdefb;
                `;
                levelBadge.textContent = `ูุณุชูู: ${q.level}`;
                document.getElementById('questionNumber').appendChild(levelBadge);
            }
            
            // ุฅุถุงูุฉ ุงููุต ูููุฑุงุกุฉ ูู ูุณุชูู ููู ุงูููุฑูุก
            if (currentTest.level === 'ููู ุงูููุฑูุก' && currentTest.currentQuestion === 0) {
                const readingDiv = document.createElement('div');
                readingDiv.id = 'readingPassage';
                readingDiv.style.cssText = `
                    background: #f8f9fa;
                    padding: 25px;
                    border-radius: 8px;
                    margin: 20px 0;
                    border-right: 4px solid #4CAF50;
                    line-height: 1.8;
                    font-size: 1.05em;
                    max-height: 400px;
                    overflow-y: auto;
                `;
                readingDiv.innerHTML = `
                    <h3 style="color: #1e3c72; margin-top: 0; margin-bottom: 15px;">ุงููุต ุงููุทููุจ ูุฑุงุกุชู:</h3>
                    <div style="white-space: pre-line;">${readingPassage}</div>
                `;
                
                const questionHeader = document.querySelector('.question-header');
                if (!document.getElementById('readingPassage')) {
                    questionHeader.insertBefore(readingDiv, questionHeader.firstChild);
                }
            }
            
            document.getElementById('questionText').innerHTML = q.q;

            const progress = ((currentTest.currentQuestion + 1) / total) * 100;
            document.getElementById('progressFill').style.width = progress + '%';

            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            const questionType = q.type || 'multiple_choice';

            if (questionType === 'multiple_choice') {
                displayMultipleChoice(q, optionsContainer);
            } else if (questionType === 'drag_drop') {
                displayDragDrop(q, optionsContainer);
            } else if (questionType === 'dropdown') {
                displayDropdown(q, optionsContainer);
            } else if (questionType === 'click_drag') {
                displayClickDrag(q, optionsContainer);
            } else if (questionType === 'essay') {
                displayEssay(q, optionsContainer);
            } else if (questionType === 'matching') {
                displayMatching(q, optionsContainer);
            } else if (questionType === 'ordering') {
                displayOrdering(q, optionsContainer);
            } else if (questionType === 'multiple_select') {
                displayMultipleSelect(q, optionsContainer);
            }

            document.getElementById('prevBtn').disabled = currentTest.currentQuestion === 0;

            if (currentTest.currentQuestion === total - 1) {
                document.getElementById('nextBtn').style.display = 'none';
                document.getElementById('finishBtn').style.display = 'inline-block';
            } else {
                document.getElementById('nextBtn').style.display = 'inline-block';
                document.getElementById('finishBtn').style.display = 'none';
            }

            // ุฅุถุงูุฉ ุฒุฑ ุนุฑุถ ุงููุต ููุณุชูู ููู ุงูููุฑูุก
            const existingShowTextBtn = document.getElementById('showTextBtn');
            if (currentTest.level === 'ููู ุงูููุฑูุก') {
                if (!existingShowTextBtn) {
                    const showTextBtn = document.createElement('button');
                    showTextBtn.id = 'showTextBtn';
                    showTextBtn.className = 'btn btn-secondary';
                    showTextBtn.textContent = 'ุนุฑุถ ุงููุต';
                    showTextBtn.style.marginLeft = '10px';
                    
                    showTextBtn.addEventListener('click', function() {
                        const readingDiv = document.getElementById('readingPassage');
                        if (readingDiv) {
                            readingDiv.style.display = readingDiv.style.display === 'none' ? 'block' : 'none';
                            this.textContent = readingDiv.style.display === 'none' ? 'ุนุฑุถ ุงููุต' : 'ุฅุฎูุงุก ุงููุต';
                        } else {
                            // ุฅูุดุงุก ุงููุต ุฅุฐุง ูู ููู ููุฌูุฏุงู
                            const newReadingDiv = document.createElement('div');
                            newReadingDiv.id = 'readingPassage';
                            newReadingDiv.style.cssText = `
                                background: #f8f9fa;
                                padding: 25px;
                                border-radius: 8px;
                                margin: 20px 0;
                                border-right: 4px solid #4CAF50;
                                line-height: 1.8;
                                font-size: 1.05em;
                                max-height: 400px;
                                overflow-y: auto;
                            `;
                            newReadingDiv.innerHTML = `
                                <h3 style="color: #1e3c72; margin-top: 0; margin-bottom: 15px;">ุงููุต ุงููุทููุจ ูุฑุงุกุชู:</h3>
                                <div style="white-space: pre-line;">${readingPassage}</div>
                            `;
                            
                            const questionHeader = document.querySelector('.question-header');
                            questionHeader.insertBefore(newReadingDiv, questionHeader.firstChild);
                            this.textContent = 'ุฅุฎูุงุก ุงููุต';
                        }
                    });
                    
                    const btnGroup = document.querySelector('.btn-group');
                    btnGroup.insertBefore(showTextBtn, btnGroup.firstChild);
                }
            } else if (existingShowTextBtn) {
                existingShowTextBtn.remove();
            }
        }

        function displayMultipleChoice(q, container) {
            q.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.textContent = option;

                if (currentTest.answers[currentTest.currentQuestion] === index) {
                    optionDiv.classList.add('selected');
                }

                optionDiv.addEventListener('click', function() {
                    document.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    currentTest.answers[currentTest.currentQuestion] = index;
                    showAnswerNote();
                });

                container.appendChild(optionDiv);
            });
        }

        function displayDragDrop(q, container) {
            const dragDropDiv = document.createElement('div');
            dragDropDiv.className = 'drag-drop-container';

            const instruction = document.createElement('p');
            instruction.textContent = 'ุงุณุญุจ ุงูุนูุงุตุฑ ูุฃููุชูุง ูู ุงูููุทูุฉ ุฃุฏูุงู ุจุงูุชุฑุชูุจ ุงูุตุญูุญ';
            instruction.style.marginBottom = '15px';
            instruction.style.fontWeight = '600';
            dragDropDiv.appendChild(instruction);

            const dragItems = document.createElement('div');
            dragItems.className = 'drag-items';

            const savedAnswer = currentTest.answers[currentTest.currentQuestion];
            const itemsToShow = savedAnswer && Array.isArray(savedAnswer) ? q.items : q.items.slice().sort(() => Math.random() - 0.5);

            itemsToShow.forEach((item, index) => {
                const dragItem = document.createElement('div');
                dragItem.className = 'drag-item';
                dragItem.textContent = item;
                dragItem.draggable = true;
                dragItem.dataset.item = item;

                dragItem.addEventListener('dragstart', function(e) {
                    this.classList.add('dragging');
                    e.dataTransfer.effectAllowed = 'move';
                    e.dataTransfer.setData('text/plain', item);
                });

                dragItem.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                });

                dragItems.appendChild(dragItem);
            });

            const dropZone = document.createElement('div');
            dropZone.className = 'drop-zone';
            dropZone.id = 'dropZone';

            if (savedAnswer && Array.isArray(savedAnswer)) {
                savedAnswer.forEach(item => {
                    const dragItem = document.createElement('div');
                    dragItem.className = 'drag-item';
                    dragItem.textContent = item;
                    dragItem.draggable = true;
                    dragItem.dataset.item = item;

                    dragItem.addEventListener('dragstart', function(e) {
                        this.classList.add('dragging');
                        e.dataTransfer.setData('text/plain', item);
                    });

                    dragItem.addEventListener('dragend', function() {
                        this.classList.remove('dragging');
                    });

                    dropZone.appendChild(dragItem);
                });
                dragItems.innerHTML = '';
            }

            dropZone.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('drag-over');
            });

            dropZone.addEventListener('dragleave', function() {
                this.classList.remove('drag-over');
            });

            dropZone.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('drag-over');

                const item = e.dataTransfer.getData('text/plain');
                const draggingElement = document.querySelector('.dragging');

                if (draggingElement) {
                    this.appendChild(draggingElement);
                    updateDragDropAnswer();
                }
            });

            dragItems.addEventListener('dragover', function(e) {
                e.preventDefault();
            });

            dragItems.addEventListener('drop', function(e) {
                e.preventDefault();
                const draggingElement = document.querySelector('.dragging');
                if (draggingElement && draggingElement.parentElement.id === 'dropZone') {
                    this.appendChild(draggingElement);
                    updateDragDropAnswer();
                }
            });

            function updateDragDropAnswer() {
                const droppedItems = Array.from(dropZone.children).map(el => el.dataset.item);
                currentTest.answers[currentTest.currentQuestion] = droppedItems;
                if (droppedItems.length > 0) {
                    showAnswerNote();
                }
            }

            dragDropDiv.appendChild(dragItems);
            dragDropDiv.appendChild(dropZone);
            container.appendChild(dragDropDiv);
        }

        function displayDropdown(q, container) {
            const dropdownDiv = document.createElement('div');
            dropdownDiv.className = 'dropdown-container';

            const select = document.createElement('select');
            select.className = 'dropdown-select';
            select.id = 'dropdownSelect';

            const defaultOption = document.createElement('option');
            defaultOption.value = '';
            defaultOption.textContent = 'ุงุฎุชุฑ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ';
            defaultOption.disabled = true;
            defaultOption.selected = true;
            select.appendChild(defaultOption);

            q.options.forEach((option, index) => {
                const optionElement = document.createElement('option');
                optionElement.value = index;
                optionElement.textContent = option;
                select.appendChild(optionElement);
            });

            const savedAnswer = currentTest.answers[currentTest.currentQuestion];
            if (savedAnswer !== null && savedAnswer !== undefined) {
                select.value = savedAnswer;
                select.classList.add('answered');
            }

            select.addEventListener('change', function() {
                currentTest.answers[currentTest.currentQuestion] = parseInt(this.value);
                this.classList.add('answered');
                showAnswerNote();
            });

            dropdownDiv.appendChild(select);
            container.appendChild(dropdownDiv);
        }

        function displayClickDrag(q, container) {
            const clickDragDiv = document.createElement('div');
            clickDragDiv.className = 'click-drag-container';

            const sliderContainer = document.createElement('div');
            sliderContainer.className = 'slider-container';

            const instruction = document.createElement('p');
            instruction.textContent = 'ุงุณุญุจ ุงููุคุดุฑ ูุงุฎุชูุงุฑ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ';
            instruction.style.marginBottom = '20px';
            instruction.style.fontWeight = '600';

            const slider = document.createElement('input');
            slider.type = 'range';
            slider.className = 'slider';
            slider.min = q.range[0];
            slider.max = q.range[1];
            slider.value = q.range[0];
            slider.id = 'clickDragSlider';

            const valueDisplay = document.createElement('div');
            valueDisplay.className = 'slider-value';
            valueDisplay.textContent = `ุงููููุฉ ุงููุฎุชุงุฑุฉ: ${slider.value}`;

            const labels = document.createElement('div');
            labels.className = 'slider-labels';
            labels.innerHTML = `<span>${q.range[0]}</span><span>${q.range[1]}</span>`;

            const savedAnswer = currentTest.answers[currentTest.currentQuestion];
            if (savedAnswer !== null && savedAnswer !== undefined) {
                slider.value = savedAnswer;
                valueDisplay.textContent = `ุงููููุฉ ุงููุฎุชุงุฑุฉ: ${savedAnswer}`;
            }

            slider.addEventListener('input', function() {
                valueDisplay.textContent = `ุงููููุฉ ุงููุฎุชุงุฑุฉ: ${this.value}`;
                currentTest.answers[currentTest.currentQuestion] = parseInt(this.value);
                showAnswerNote();
            });

            sliderContainer.appendChild(instruction);
            sliderContainer.appendChild(valueDisplay);
            sliderContainer.appendChild(slider);
            sliderContainer.appendChild(labels);
            clickDragDiv.appendChild(sliderContainer);
            container.appendChild(clickDragDiv);
        }

        function displayEssay(q, container) {
            const essayDiv = document.createElement('div');
            essayDiv.className = 'essay-container';

            const instructions = document.createElement('div');
            instructions.className = 'essay-instructions';
            instructions.innerHTML = `
                <strong>ุชุนูููุงุช:</strong><br>
                โข ุงูุชุจ ุฅุฌุงุจุชู ุจูุถูุญ ูุฏูุฉ<br>
                โข ูุง ููุฌุฏ ุญุฏ ุฃุฏูู ุฃู ุฃูุตู ูุนุฏุฏ ุงููููุงุช<br>
                โข ุฑูุฒ ุนูู ุงููุญุชูู ูุงููุนูู
            `;

            const textarea = document.createElement('textarea');
            textarea.className = 'essay-textarea';
            textarea.placeholder = 'ุงูุชุจ ุฅุฌุงุจุชู ููุง...';
            textarea.id = 'essayTextarea';

            const wordCount = document.createElement('div');
            wordCount.className = 'word-count';
            wordCount.textContent = 'ุนุฏุฏ ุงููููุงุช: 0';

            const savedAnswer = currentTest.answers[currentTest.currentQuestion];
            if (savedAnswer && typeof savedAnswer === 'string') {
                textarea.value = savedAnswer;
                textarea.classList.add('answered');
                updateWordCount();
            }

            function updateWordCount() {
                const text = textarea.value.trim();
                const words = text ? text.split(/\s+/).length : 0;
                wordCount.textContent = `ุนุฏุฏ ุงููููุงุช: ${words}`;
                wordCount.className = 'word-count valid';
            }

            textarea.addEventListener('input', function() {
                currentTest.answers[currentTest.currentQuestion] = this.value;
                updateWordCount();
                
                if (this.value.trim()) {
                    this.classList.add('answered');
                    showAnswerNote();
                } else {
                    this.classList.remove('answered');
                }
            });

            essayDiv.appendChild(instructions);
            essayDiv.appendChild(textarea);
            essayDiv.appendChild(wordCount);
            container.appendChild(essayDiv);
        }

        function displayMatching(q, container) {
            const matchingDiv = document.createElement('div');
            matchingDiv.className = 'matching-container';

            const instruction = document.createElement('p');
            instruction.textContent = 'ุงููุฑ ุนูู ุนูุตุฑ ูู ุงูุนููุฏ ุงูุฃูุณุฑ ุซู ุนูู ุงูุนูุตุฑ ุงููุทุงุจู ูู ูู ุงูุนููุฏ ุงูุฃููู';
            instruction.style.marginBottom = '20px';
            instruction.style.fontWeight = '600';
            instruction.style.textAlign = 'center';

            const columnsDiv = document.createElement('div');
            columnsDiv.className = 'matching-columns';
            columnsDiv.style.position = 'relative';

            const leftColumn = document.createElement('div');
            leftColumn.className = 'matching-column';
            leftColumn.innerHTML = '<h4>ุงูุนููุฏ ุงูุฃูู</h4>';

            const rightColumn = document.createElement('div');
            rightColumn.className = 'matching-column';
            rightColumn.innerHTML = '<h4>ุงูุนููุฏ ุงูุซุงูู</h4>';

            let selectedLeft = null;
            let matches = {};
            const savedAnswer = currentTest.answers[currentTest.currentQuestion];
            if (savedAnswer && typeof savedAnswer === 'object') {
                matches = { ...savedAnswer };
            }

            q.leftColumn.forEach((item, index) => {
                const leftItem = document.createElement('div');
                leftItem.className = 'matching-item';
                leftItem.textContent = item;
                leftItem.dataset.item = item;
                leftItem.dataset.side = 'left';

                if (matches[item]) {
                    leftItem.classList.add('matched');
                }

                leftItem.addEventListener('click', function() {
                    if (this.classList.contains('matched')) return;

                    document.querySelectorAll('.matching-item[data-side="left"]').forEach(el => {
                        el.classList.remove('selected');
                    });

                    this.classList.add('selected');
                    selectedLeft = item;
                });

                leftColumn.appendChild(leftItem);
            });

            q.rightColumn.forEach((item, index) => {
                const rightItem = document.createElement('div');
                rightItem.className = 'matching-item';
                rightItem.textContent = item;
                rightItem.dataset.item = item;
                rightItem.dataset.side = 'right';

                if (Object.values(matches).includes(item)) {
                    rightItem.classList.add('matched');
                }

                rightItem.addEventListener('click', function() {
                    if (this.classList.contains('matched') || !selectedLeft) return;

                    matches[selectedLeft] = item;
                    currentTest.answers[currentTest.currentQuestion] = matches;

                    // ุชุญุฏูุซ ุงููุงุฌูุฉ
                    document.querySelector(`[data-item="${selectedLeft}"][data-side="left"]`).classList.add('matched');
                    document.querySelector(`[data-item="${selectedLeft}"][data-side="left"]`).classList.remove('selected');
                    this.classList.add('matched');

                    selectedLeft = null;
                    showAnswerNote();
                });

                rightColumn.appendChild(rightItem);
            });

            columnsDiv.appendChild(leftColumn);
            columnsDiv.appendChild(rightColumn);

            matchingDiv.appendChild(instruction);
            matchingDiv.appendChild(columnsDiv);
            container.appendChild(matchingDiv);
        }

        function displayOrdering(q, container) {
            const orderingDiv = document.createElement('div');
            orderingDiv.className = 'ordering-container';

            const instruction = document.createElement('p');
            instruction.textContent = 'ุงุณุญุจ ุงูุนูุงุตุฑ ูุชุฑุชูุจูุง ุจุงูุชุณูุณู ุงูุตุญูุญ';
            instruction.style.marginBottom = '20px';
            instruction.style.fontWeight = '600';
            instruction.style.textAlign = 'center';

            const itemsContainer = document.createElement('div');
            itemsContainer.className = 'ordering-items';

            const savedAnswer = currentTest.answers[currentTest.currentQuestion];
            const itemsToShow = savedAnswer && Array.isArray(savedAnswer) ? savedAnswer : q.items.slice().sort(() => Math.random() - 0.5);

            function updateOrderingNumbers() {
                const items = itemsContainer.querySelectorAll('.ordering-item');
                items.forEach((item, index) => {
                    const numberSpan = item.querySelector('.ordering-number');
                    numberSpan.textContent = index + 1;
                });
            }

            itemsToShow.forEach((item, index) => {
                const orderingItem = document.createElement('div');
                orderingItem.className = 'ordering-item';
                orderingItem.draggable = true;
                orderingItem.dataset.item = item;

                const itemText = document.createElement('span');
                itemText.textContent = item;

                const numberSpan = document.createElement('span');
                numberSpan.className = 'ordering-number';
                numberSpan.textContent = index + 1;

                orderingItem.appendChild(itemText);
                orderingItem.appendChild(numberSpan);

                orderingItem.addEventListener('dragstart', function(e) {
                    this.classList.add('dragging');
                    e.dataTransfer.effectAllowed = 'move';
                    e.dataTransfer.setData('text/plain', item);
                });

                orderingItem.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                });

                itemsContainer.appendChild(orderingItem);
            });

            itemsContainer.addEventListener('dragover', function(e) {
                e.preventDefault();
                const dragging = document.querySelector('.dragging');
                const afterElement = getDragAfterElement(itemsContainer, e.clientY);
                
                if (afterElement == null) {
                    itemsContainer.appendChild(dragging);
                } else {
                    itemsContainer.insertBefore(dragging, afterElement);
                }
                
                updateOrderingNumbers();
                updateOrderingAnswer();
            });

            function getDragAfterElement(container, y) {
                const draggableElements = [...container.querySelectorAll('.ordering-item:not(.dragging)')];
                
                return draggableElements.reduce((closest, child) => {
                    const box = child.getBoundingClientRect();
                    const offset = y - box.top - box.height / 2;
                    
                    if (offset < 0 && offset > closest.offset) {
                        return { offset: offset, element: child };
                    } else {
                        return closest;
                    }
                }, { offset: Number.NEGATIVE_INFINITY }).element;
            }

            function updateOrderingAnswer() {
                const orderedItems = Array.from(itemsContainer.children).map(el => el.dataset.item);
                currentTest.answers[currentTest.currentQuestion] = orderedItems;
                showAnswerNote();
            }

            updateOrderingNumbers();

            orderingDiv.appendChild(instruction);
            orderingDiv.appendChild(itemsContainer);
            container.appendChild(orderingDiv);
        }

        function displayMultipleSelect(q, container) {
            const multiSelectDiv = document.createElement('div');
            multiSelectDiv.className = 'multiple-select-container';

            const instructions = document.createElement('div');
            instructions.className = 'multiple-select-instructions';
            instructions.textContent = 'ุงุฎุชุฑ ูู ูุง ููุทุจู';

            const savedAnswer = currentTest.answers[currentTest.currentQuestion];
            let selectedOptions = [];
            if (savedAnswer && Array.isArray(savedAnswer)) {
                selectedOptions = [...savedAnswer];
            }

            q.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'multiple-select-option';
                
                if (selectedOptions.includes(index)) {
                    optionDiv.classList.add('selected');
                }

                const checkbox = document.createElement('div');
                checkbox.className = 'multiple-select-checkbox';
                if (selectedOptions.includes(index)) {
                    checkbox.textContent = 'โ';
                }

                const text = document.createElement('span');
                text.textContent = option;

                optionDiv.appendChild(checkbox);
                optionDiv.appendChild(text);

                optionDiv.addEventListener('click', function() {
                    const isSelected = this.classList.contains('selected');
                    
                    if (isSelected) {
                        this.classList.remove('selected');
                        checkbox.textContent = '';
                        selectedOptions = selectedOptions.filter(i => i !== index);
                    } else {
                        this.classList.add('selected');
                        checkbox.textContent = 'โ';
                        selectedOptions.push(index);
                    }

                    currentTest.answers[currentTest.currentQuestion] = selectedOptions;
                    if (selectedOptions.length > 0) {
                        showAnswerNote();
                    }
                });

                multiSelectDiv.appendChild(optionDiv);
            });

            container.appendChild(instructions);
            container.appendChild(multiSelectDiv);
        }

        function showAnswerNote() {
            const note = document.getElementById('answerNote');
            note.style.display = 'block';
            setTimeout(() => {
                note.style.display = 'none';
            }, 2000);
        }

        document.getElementById('prevBtn').addEventListener('click', function() {
            if (currentTest.currentQuestion > 0) {
                currentTest.currentQuestion--;
                displayQuestion();
            }
        });

        document.getElementById('nextBtn').addEventListener('click', function() {
            if (currentTest.currentQuestion < currentTest.questions.length - 1) {
                currentTest.currentQuestion++;
                displayQuestion();
            }
        });

        document.getElementById('saveProgressBtn').addEventListener('click', function() {
            if (currentTest.timerInterval) {
                clearInterval(currentTest.timerInterval);
            }
            alert('ุชู ุญูุธ ุชูุฏูู! ููููู ุงูุนูุฏุฉ ูุงุญูุงู ูุฅููุงู ุงูุงุฎุชุจุงุฑ.');
            showPage('homePage');
        });

        document.getElementById('finishBtn').addEventListener('click', finishTest);

        function checkEssayAnswer(userAnswer, modelAnswer) {
            // ุชูุธูู ุงููุตูุต ูุชุญููููุง ููุฃุญุฑู ุงูุตุบูุฑุฉ
            const cleanUser = userAnswer.trim().toLowerCase()
                .replace(/[ุุ:.!ุ]/g, '') // ุฅุฒุงูุฉ ุนูุงูุงุช ุงูุชุฑููู
                .replace(/\s+/g, ' '); // ุชูุญูุฏ ุงููุณุงูุงุช
            
            const cleanModel = modelAnswer.trim().toLowerCase()
                .replace(/[ุุ:.!ุ]/g, '')
                .replace(/\s+/g, ' ');

            // ุงุณุชุฎุฑุงุฌ ุงููููุงุช ุงูููุชุงุญูุฉ ูู ุงูุฅุฌุงุจุฉ ุงููููุฐุฌูุฉ
            const modelWords = cleanModel.split(' ').filter(word => word.length > 2);
            const userWords = cleanUser.split(' ');

            // ุญุณุงุจ ูุณุจุฉ ุงูุชุทุงุจู
            let matchCount = 0;
            modelWords.forEach(modelWord => {
                if (userWords.some(userWord => 
                    userWord.includes(modelWord) || modelWord.includes(userWord) ||
                    Math.abs(userWord.length - modelWord.length) <= 1
                )) {
                    matchCount++;
                }
            });

            // ุฅุฐุง ูุงูุช ูุณุจุฉ ุงูุชุทุงุจู ุฃูุซุฑ ูู 40% ูุนุชุจุฑ ุงูุฅุฌุงุจุฉ ุตุญูุญุฉ
            const matchPercentage = (matchCount / modelWords.length) * 100;
            return matchPercentage >= 40;
        }

        async function finishTest() {
            if (currentTest.timerInterval) {
                clearInterval(currentTest.timerInterval);
            }

            const timeSpent = Math.floor((Date.now() - currentTest.startTime) / 1000);
            let correctCount = 0;

            currentTest.questions.forEach((q, index) => {
                const userAnswer = currentTest.answers[index];
                const questionType = q.type || 'multiple_choice';

                if (questionType === 'multiple_choice') {
                    if (userAnswer === q.correct) {
                        correctCount++;
                    }
                } else if (questionType === 'drag_drop') {
                    if (Array.isArray(userAnswer) && JSON.stringify(userAnswer) === JSON.stringify(q.correctOrder)) {
                        correctCount++;
                    }
                } else if (questionType === 'dropdown') {
                    if (userAnswer === q.correct) {
                        correctCount++;
                    }
                } else if (questionType === 'click_drag') {
                    if (userAnswer === q.correct) {
                        correctCount++;
                    }
                } else if (questionType === 'essay') {
                    // ููุฃุณุฆูุฉ ุงูููุงููุฉุ ููุงุฑู ูุน ุงูุฅุฌุงุจุฉ ุงููููุฐุฌูุฉ
                    if (userAnswer && typeof userAnswer === 'string' && q.modelAnswer) {
                        if (checkEssayAnswer(userAnswer, q.modelAnswer)) {
                            correctCount++;
                        }
                    }
                } else if (questionType === 'matching') {
                    if (userAnswer && typeof userAnswer === 'object') {
                        let allCorrect = true;
                        for (const [key, value] of Object.entries(q.correctMatches)) {
                            if (userAnswer[key] !== value) {
                                allCorrect = false;
                                break;
                            }
                        }
                        if (allCorrect && Object.keys(userAnswer).length === Object.keys(q.correctMatches).length) {
                            correctCount++;
                        }
                    }
                } else if (questionType === 'ordering') {
                    if (Array.isArray(userAnswer) && JSON.stringify(userAnswer) === JSON.stringify(q.correctOrder)) {
                        correctCount++;
                    }
                } else if (questionType === 'multiple_select') {
                    if (Array.isArray(userAnswer) && Array.isArray(q.correct)) {
                        const sortedUser = [...userAnswer].sort((a, b) => a - b);
                        const sortedCorrect = [...q.correct].sort((a, b) => a - b);
                        if (JSON.stringify(sortedUser) === JSON.stringify(sortedCorrect)) {
                            correctCount++;
                        }
                    }
                }
            });

            const percentage = Math.round((correctCount / currentTest.questions.length) * 100);
            const incorrectCount = currentTest.questions.length - correctCount;

            document.getElementById('scorePercentage').textContent = percentage + '%';
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('incorrectCount').textContent = incorrectCount;

            const minutes = Math.floor(timeSpent / 60);
            const seconds = timeSpent % 60;
            document.getElementById('timeSpent').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

            const reviewContainer = document.getElementById('reviewContainer');
            reviewContainer.innerHTML = '';

            currentTest.questions.forEach((q, index) => {
                const reviewItem = document.createElement('div');
                const userAnswer = currentTest.answers[index];
                const questionType = q.type || 'multiple_choice';
                let isCorrect = false;
                let userAnswerText = 'ูู ุชุฌุจ';
                let correctAnswerText = '';

                if (questionType === 'multiple_choice') {
                    isCorrect = userAnswer === q.correct;
                    if (userAnswer !== null && userAnswer !== undefined) {
                        userAnswerText = q.options[userAnswer];
                    }
                    correctAnswerText = q.options[q.correct];
                } else if (questionType === 'drag_drop') {
                    isCorrect = Array.isArray(userAnswer) && JSON.stringify(userAnswer) === JSON.stringify(q.correctOrder);
                    if (Array.isArray(userAnswer)) {
                        userAnswerText = userAnswer.join(' โ ');
                    }
                    correctAnswerText = q.correctOrder.join(' โ ');
                } else if (questionType === 'dropdown') {
                    isCorrect = userAnswer === q.correct;
                    if (userAnswer !== null && userAnswer !== undefined) {
                        userAnswerText = q.options[userAnswer];
                    }
                    correctAnswerText = q.options[q.correct];
                } else if (questionType === 'click_drag') {
                    isCorrect = userAnswer === q.correct;
                    if (userAnswer !== null && userAnswer !== undefined) {
                        userAnswerText = userAnswer.toString();
                    }
                    correctAnswerText = q.correct.toString();
                } else if (questionType === 'essay') {
                    if (userAnswer && typeof userAnswer === 'string' && q.modelAnswer) {
                        isCorrect = checkEssayAnswer(userAnswer, q.modelAnswer);
                        userAnswerText = userAnswer.length > 150 ? userAnswer.substring(0, 150) + '...' : userAnswer;
                    }
                    correctAnswerText = q.modelAnswer || 'ุฅุฌุงุจุฉ ููุงููุฉ';
                } else if (questionType === 'matching') {
                    if (userAnswer && typeof userAnswer === 'object') {
                        let allCorrect = true;
                        for (const [key, value] of Object.entries(q.correctMatches)) {
                            if (userAnswer[key] !== value) {
                                allCorrect = false;
                                break;
                            }
                        }
                        isCorrect = allCorrect && Object.keys(userAnswer).length === Object.keys(q.correctMatches).length;
                        
                        const userMatches = Object.entries(userAnswer).map(([k, v]) => `${k} โ ${v}`).join(', ');
                        userAnswerText = userMatches || 'ูู ุชุฌุจ';
                        
                        const correctMatches = Object.entries(q.correctMatches).map(([k, v]) => `${k} โ ${v}`).join(', ');
                        correctAnswerText = correctMatches;
                    } else {
                        const correctMatches = Object.entries(q.correctMatches).map(([k, v]) => `${k} โ ${v}`).join(', ');
                        correctAnswerText = correctMatches;
                    }
                } else if (questionType === 'ordering') {
                    isCorrect = Array.isArray(userAnswer) && JSON.stringify(userAnswer) === JSON.stringify(q.correctOrder);
                    if (Array.isArray(userAnswer)) {
                        userAnswerText = userAnswer.join(' โ ');
                    }
                    correctAnswerText = q.correctOrder.join(' โ ');
                } else if (questionType === 'multiple_select') {
                    if (Array.isArray(userAnswer) && Array.isArray(q.correct)) {
                        const sortedUser = [...userAnswer].sort((a, b) => a - b);
                        const sortedCorrect = [...q.correct].sort((a, b) => a - b);
                        isCorrect = JSON.stringify(sortedUser) === JSON.stringify(sortedCorrect);
                        
                        if (userAnswer.length > 0) {
                            userAnswerText = userAnswer.map(i => q.options[i]).join(', ');
                        }
                        correctAnswerText = q.correct.map(i => q.options[i]).join(', ');
                    } else {
                        correctAnswerText = q.correct.map(i => q.options[i]).join(', ');
                    }
                }

                reviewItem.className = `review-item ${isCorrect ? 'correct' : 'incorrect'}`;

                let html = `
                    <div class="review-question">ุงูุณุคุงู ${index + 1}: ${q.q}</div>
                `;

                if (isCorrect) {
                    html += `<div class="review-answer correct-answer">โ ุฅุฌุงุจุชู ุตุญูุญุฉ: ${correctAnswerText}</div>`;
                } else {
                    html += `
                        <div class="review-answer user-answer">โ ุฅุฌุงุจุชู: ${userAnswerText}</div>
                        <div class="review-answer correct-answer">โ ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ: ${correctAnswerText}</div>
                    `;
                }

                reviewItem.innerHTML = html;
                reviewContainer.appendChild(reviewItem);
            });

            const testData = {
                test_id: Date.now().toString(),
                student_name: document.getElementById('studentName').value,
                subject: currentTest.subject,
                level: currentTest.level,
                answers: JSON.stringify(currentTest.answers),
                score: percentage,
                total_questions: currentTest.questions.length,
                completed_at: new Date().toISOString(),
                time_spent: timeSpent
            };

            if (window.dataSdk) {
                const createResult = await window.dataSdk.create(testData);
                if (!createResult.isOk) {
                    console.error('Failed to save test data');
                }
            }

            showPage('resultsPage');
        }

        document.getElementById('newTestBtn').addEventListener('click', function() {
            currentTest = {
                subject: '',
                level: '',
                duration: 0,
                questions: [],
                answers: [],
                currentQuestion: 0,
                startTime: null,
                timerInterval: null
            };

            document.getElementById('studentName').value = '';
            document.getElementById('levelSelect').value = '';
            document.getElementById('durationSelect').value = '0';
            document.querySelectorAll('.subject-card').forEach(c => c.classList.remove('selected'));
            document.getElementById('continueBtn').disabled = true;

            showPage('homePage');
        });

        const dataHandler = {
            onDataChanged(data) {
                allTestData = data;
            }
        };

        async function initializeApp() {
            if (window.dataSdk) {
                const initResult = await window.dataSdk.init(dataHandler);
                if (!initResult.isOk) {
                    console.error('Failed to initialize data SDK');
                }
            }

            if (window.elementSdk) {
                window.elementSdk.init({
                    defaultConfig: defaultConfig,
                    onConfigChange: async (config) => {
                        currentConfig = { ...config };
                        updateUI();
                    },
                    mapToCapabilities: (config) => ({
                        recolorables: [
                            {
                                get: () => config.background_color || defaultConfig.background_color,
                                set: (value) => {
                                    config.background_color = value;
                                    window.elementSdk.setConfig({ background_color: value });
                                }
                            },
                            {
                                get: () => config.surface_color || defaultConfig.surface_color,
                                set: (value) => {
                                    config.surface_color = value;
                                    window.elementSdk.setConfig({ surface_color: value });
                                }
                            },
                            {
                                get: () => config.text_color || defaultConfig.text_color,
                                set: (value) => {
                                    config.text_color = value;
                                    window.elementSdk.setConfig({ text_color: value });
                                }
                            },
                            {
                                get: () => config.primary_action_color || defaultConfig.primary_action_color,
                                set: (value) => {
                                    config.primary_action_color = value;
                                    window.elementSdk.setConfig({ primary_action_color: value });
                                }
                            },
                            {
                                get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
                                set: (value) => {
                                    config.secondary_action_color = value;
                                    window.elementSdk.setConfig({ secondary_action_color: value });
                                }
                            }
                        ],
                        borderables: [],
                        fontEditable: {
                            get: () => config.font_family || defaultConfig.font_family,
                            set: (value) => {
                                config.font_family = value;
                                window.elementSdk.setConfig({ font_family: value });
                            }
                        },
                        fontSizeable: {
                            get: () => config.font_size || defaultConfig.font_size,
                            set: (value) => {
                                config.font_size = value;
                                window.elementSdk.setConfig({ font_size: value });
                            }
                        }
                    }),
                    mapToEditPanelValues: (config) => new Map([
                        ["school_name", config.school_name || defaultConfig.school_name],
                        ["welcome_text", config.welcome_text || defaultConfig.welcome_text],
                        ["instructions_title", config.instructions_title || defaultConfig.instructions_title],
                        ["start_button_text", config.start_button_text || defaultConfig.start_button_text],
                        ["results_title", config.results_title || defaultConfig.results_title]
                    ])
                });

                if (window.elementSdk.config) {
                    currentConfig = { ...window.elementSdk.config };
                }
            }

            updateUI();
        }

        initializeApp();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99e74f1eb3f1de53',t:'MTc2MzEzMTcwMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>